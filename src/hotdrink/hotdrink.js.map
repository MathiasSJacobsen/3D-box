{"version":3,"file":"hotdrink.js","mappings":"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","sources":["webpack://hd/webpack/universalModuleDefinition","webpack://hd/./lib/computation-graph.js","webpack://hd/./lib/constraint-builder.js","webpack://hd/./lib/constraint-system/component.js","webpack://hd/./lib/constraint-system/constraint-spec.js","webpack://hd/./lib/constraint-system/constraint-system-util.js","webpack://hd/./lib/constraint-system/constraint-system.js","webpack://hd/./lib/constraint-system/constraint.js","webpack://hd/./lib/constraint-system/method.js","webpack://hd/./lib/constraint-system/simple-planner.js","webpack://hd/./lib/constraint-system/solution-graph.js","webpack://hd/./lib/constraint-system/variable-reference.js","webpack://hd/./lib/constraint-system/variable.js","webpack://hd/./lib/graph-algorithms.js","webpack://hd/./lib/hdconsole.js","webpack://hd/./lib/hotdrink.js","webpack://hd/./lib/lexing-tools.js","webpack://hd/./lib/observable.js","webpack://hd/./lib/parsing.js","webpack://hd/./lib/peek-iterator.js","webpack://hd/./lib/utilities.js","webpack://hd/webpack/bootstrap","webpack://hd/webpack/before-startup","webpack://hd/webpack/startup","webpack://hd/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"hd\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hd\"] = factory();\n\telse\n\t\troot[\"hd\"] = factory();\n})(self, function() {\nreturn ","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VariableActivation = exports.TrackingPromise = exports.MethodActivation = exports.EvaluationGraph = exports.Deferred = void 0;\n\nvar _variable = _interopRequireDefault(require(\"./constraint-system/variable\"));\n\nvar _constraintSystemUtil = require(\"./constraint-system/constraint-system-util\");\n\nvar _utilities = require(\"./utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Deferred {\n  constructor() {\n    this._promise = new Promise((r, j) => {\n      this.resolve = v => {\n        r(v);\n      };\n\n      this.reject = e => {\n        j(e);\n      };\n    });\n  }\n\n  get promise() {\n    return this._promise;\n  }\n\n}\n\nexports.Deferred = Deferred;\n\nclass TrackingPromise {\n  constructor(p, tracker) {\n    this._promise = p;\n    this._fulfillTracker = tracker;\n  }\n\n  then(onFulfilled, onRejected) {\n    if (onFulfilled != null) this._fulfillTracker();\n    return this._promise.then(onFulfilled, onRejected);\n  }\n\n  catch(onRejected) {\n    return this._promise.catch(onRejected);\n  }\n\n  finally(onFinally) {\n    return this._promise.finally(onFinally);\n  }\n\n}\n\nexports.TrackingPromise = TrackingPromise;\nconst abandoned = {};\n\nclass VariableActivation {\n  constructor(v) {\n    this._pending = false;\n    this._variable = v;\n    this._deferred = new Deferred();\n    this._outMethods = new Set();\n    this._inMethod = null;\n    (0, _utilities.mkRefCounted)(this, t => {\n      t.reject(VariableActivation.abandoned);\n      t._inMethod = null;\n    });\n  }\n\n  get name() {\n    return this._variable.name;\n  }\n\n  get inMethod() {\n    return this._inMethod;\n  }\n\n  get outMethods() {\n    return this._outMethods;\n  }\n\n  outMethodsSize() {\n    return this._outMethods.size;\n  }\n\n  addOutMethod(m) {\n    this._outMethods.add(m);\n  }\n\n  setInMethod(m) {\n    this._inMethod = m;\n  }\n\n  resolve(v) {\n    this._pending = false;\n    return this._deferred.resolve(v);\n  }\n\n  reject(e) {\n    this._pending = false;\n    return this._deferred.reject(e);\n  }\n\n  get promise() {\n    return this._deferred.promise;\n  }\n\n}\n\nexports.VariableActivation = VariableActivation;\nVariableActivation.abandoned = {};\n\nclass MethodActivation {\n  constructor(f, promiseMask) {\n    this._f = f;\n    this._mask = promiseMask;\n  }\n\n  get ins() {\n    return this._ins;\n  }\n\n  get outs() {\n    return this._outs;\n  }\n\n  insSize() {\n    return this._ins.length;\n  }\n\n  outsSize() {\n    return this._outs.length;\n  }\n\n  async execute(ins, outs) {\n    this._ins = ins;\n    this._outs = outs;\n    outs.forEach(o => o.setInMethod(this)); // retain all inputs\n\n    ins.forEach(i => (0, _utilities.retain)(i)); // once _all_ output variable activations have been settled\n    // (either by this method or by becoming abandoned), this method\n    // activation has no use anymore; in particular it does not need\n    // its input activations anymore, and it will release them.  We\n    // use Promise.all to detect when all outputs have been settled\n    // or rejected, but since Promise.all rejects immediately if any\n    // of the promises it waits rejects, we do not wait for the output\n    // promises directly, but rather for another set of promises\n    // (oproms) that wrap the output promises and resolve regardless\n    // whether the corresponding outputs reject or resolve.\n\n    let oproms = outs.map(o => o.promise.then(v => null, e => null));\n    Promise.all(oproms).then(() => {\n      ins.forEach(i => {\n        (0, _utilities.release)(i);\n      });\n    }); // FIXME: this can be replaced with Promise.allSettled(), once\n    // it becomes supported\n\n    let nonpromiseIns = ins.filter((e, i) => (this._mask[i] & _constraintSystemUtil.maskPromise) === 0); // these are regular in-parameters that are awaited before passing into method's f\n\n    let modifiedIns = ins.filter((e, i) => (this._mask[i] & _constraintSystemUtil.maskUpdate) !== 0); // these are the inputs that are also outputs, and where there is aliasing between\n    // the input and the output. Methods that perform this kind of modification can only\n    // be executed when the inputs have reference count 1 (then all the other methods that\n    // use those inputs have already finished (there can be at most one method that performs\n    // such a modifying write)\n\n    let mCount = modifiedIns.length;\n\n    if (mCount > 0) {\n      let def = new Deferred();\n      let arr = [];\n\n      for (let i = 0; i < modifiedIns.length; ++i) {\n        arr.push(modifiedIns[i].name);\n        (0, _utilities.setUniqueHandler)(modifiedIns[i], v => {\n          if (--mCount === 0) def.resolve(null);\n        });\n      }\n\n      await def.promise; // now all possibly modifying variables have only one reference\n    }\n\n    let inValues;\n\n    try {\n      // await for all non-promise inputs\n      inValues = await Promise.all(nonpromiseIns.map(v => v.promise));\n    } catch (e) {\n      // if any non-promise input rejects, the wrapped f cannot be called, so\n      // all outputs can be rejected\n      outs.forEach(o => o.reject(\"a method's input was rejected\"));\n      return;\n    } // construct the wrapped f's input argument from promise inputs\n    // and the resolved values of non-promise inputs\n\n\n    let inArgs = [],\n        vind = 0;\n\n    for (let i = 0; i < ins.length; ++i) {\n      if ((this._mask[i] & _constraintSystemUtil.maskPromise) !== 0) {\n        inArgs[i] = new TrackingPromise(ins[i].promise, () => ins[i].addOutMethod(this));\n      } else {\n        ins[i].addOutMethod(this);\n        inArgs[i] = inValues[vind++];\n      }\n    }\n\n    let r;\n\n    try {\n      r = await this._f(...inArgs); // in case of one return, result can be\n      // a promise, we await for it here to\n      // avoid unhandled rejection. (This also\n      // allows a method that returns a\n      // promise that resolves to an array)\n    } catch (e) {\n      // this error is from f itself; therefore we reject all outputs\n      // with the reason e\n      outs.forEach(o => o.reject(e));\n      return;\n    } // if method has more than one output, f should return an array\n\n\n    if (outs.length > 1) {\n      console.assert(Array.isArray(r) && outs.length == r.length, `Method result shoud be an array of ${outs.length} elements`);\n\n      for (let i = 0; i < r.length; ++i) outs[i].resolve(r[i]); // r[i] can be a promise or a value\n\n    } else {\n      // only one output; result of f is not expected to be wrapped in a singleton array\n      outs[0].resolve(r);\n    }\n  }\n\n}\n\nexports.MethodActivation = MethodActivation;\n\nclass EvaluationGraph {\n  adjacentOutVertices(v) {\n    if (v instanceof VariableActivation) return v.outMethods;else return v.outs;\n  }\n\n  outDegree(v) {\n    if (v instanceof VariableActivation) return v.outMethodsSize();else return v.outsSize();\n  }\n\n  adjacentInVertices(v) {\n    if (v instanceof VariableActivation) return v.inMethod != null ? [v.inMethod] : [];else return v.ins;\n  }\n\n  inDegree(v) {\n    if (v instanceof VariableActivation) return v.inMethod != null ? 1 : 0;else return v.insSize();\n  }\n\n}\n\nexports.EvaluationGraph = EvaluationGraph;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LEFT = exports.ComponentScope = void 0;\nObject.defineProperty(exports, \"ParseState\", {\n  enumerable: true,\n  get: function () {\n    return _parsing.ParseState;\n  }\n});\nexports.TypeError = exports.SetScope = exports.RIGHT = void 0;\nexports.asLeft = asLeft;\nexports.asRight = asRight;\nexports.block = void 0;\nexports.buildComponent = buildComponent;\nexports.checkComponent = checkComponent;\nexports.checkConstraint = checkConstraint;\nexports.checkFirstMethod = checkFirstMethod;\nexports.checkOtherMethod = checkOtherMethod;\nexports.checkParameterList = checkParameterList;\nexports.checkQualifiers = checkQualifiers;\nexports.component = component;\nexports.functionBody = void 0;\nObject.defineProperty(exports, \"hdl\", {\n  enumerable: true,\n  get: function () {\n    return _parsing.hdl;\n  }\n});\nexports.isLeft = isLeft;\nexports.isRight = isRight;\nexports.jsCode = jsCode;\nexports.left = left;\nObject.defineProperty(exports, \"mkParseState\", {\n  enumerable: true,\n  get: function () {\n    return _parsing.mkParseState;\n  }\n});\nexports.pComponent = pComponent;\nexports.pConstraint = pConstraint;\nexports.pMethod = pMethod;\nexports.pVariables = pVariables;\nexports.qualifiedParameterList = qualifiedParameterList;\nexports.qualifierList = qualifierList;\nexports.right = right;\nexports.stringLiteral = stringLiteral;\nexports.templateLiteral = templateLiteral;\nexports.topComponent = topComponent;\nexports.withPos = withPos;\n\nvar _constraint = _interopRequireDefault(require(\"./constraint-system/constraint\"));\n\nvar _parsing = require(\"./parsing\");\n\nvar _lexingTools = require(\"./lexing-tools\");\n\nvar _component = _interopRequireDefault(require(\"./constraint-system/component\"));\n\nvar _constraintSpec = _interopRequireDefault(require(\"./constraint-system/constraint-spec\"));\n\nvar _method = _interopRequireDefault(require(\"./constraint-system/method\"));\n\nvar _variableReference = _interopRequireDefault(require(\"./constraint-system/variable-reference\"));\n\nvar _constraintSystemUtil = require(\"./constraint-system/constraint-system-util\");\n\nvar _utilities = require(\"./utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst LEFT = 0;\nexports.LEFT = LEFT;\nconst RIGHT = 1;\nexports.RIGHT = RIGHT;\n\nfunction left(v) {\n  return {\n    tag: LEFT,\n    value: v\n  };\n}\n\nfunction right(v) {\n  return {\n    tag: RIGHT,\n    value: v\n  };\n} // %checks do not work\n\n\nfunction isLeft(e) {\n  return e.tag === LEFT;\n}\n\nfunction isRight(e) {\n  return e.tag === RIGHT;\n}\n\nfunction asLeft(e) {\n  if (e.tag !== LEFT) throw \"Either cast error: no value on left\";\n  return e.value;\n}\n\nfunction asRight(e) {\n  if (e.tag !== RIGHT) throw e.value;\n  return e.value;\n}\n\nfunction withPos(p) {\n  return (0, _parsing.lift2)((cp, v) => ({\n    pos: cp,\n    value: v\n  }))(_parsing.currentPos, p);\n}\n\nclass ComponentScope {\n  constructor(cmp) {\n    this._component = cmp;\n  }\n\n  get(key) {\n    let m = this._component;\n\n    while (m != null) {\n      let v = m.variableDeclarations.get(key);\n      if (v !== undefined) return v;else m = m.parent;\n    }\n  }\n\n  has(key) {\n    return this.get(key) !== undefined;\n  }\n\n}\n\nexports.ComponentScope = ComponentScope;\n\nclass SetScope {\n  constructor(s) {\n    this._set = s;\n  }\n\n  get(k) {\n    return this.has(k) ? k : undefined;\n  }\n\n  has(k) {\n    return this._set.has(k);\n  }\n\n}\n\nexports.SetScope = SetScope;\n\nclass TypeError extends Error {\n  constructor(m, p) {\n    super();\n    this._msg = m;\n    this._pos = p;\n  }\n\n  get message() {\n    return this._pos.toString() + \"\\n\" + this._msg;\n  }\n\n  set message(s) {\n    throw Error(\"Cannot set the name of ParseError\");\n  }\n\n}\n\nexports.TypeError = TypeError;\n\nfunction checkQualifiers(qs) {\n  if (qs.length > 1) {\n    let seen = new Set();\n\n    for (let q of qs) {\n      if (seen.has(q.value)) return left(new TypeError(`The same qualifier ${q.value} appears twice`, q.pos));\n      seen.add(q.value);\n    }\n  }\n\n  return right(null);\n}\n\nfunction checkParameterList(pars, scope) {\n  let seenName = new Set();\n\n  for (let par of pars) {\n    // check qualifiers for duplicates\n    let r = checkQualifiers(par.value.qualifiers);\n    if (isLeft(r)) return left(asLeft(r)); // check if variable name duplicate\n\n    let pn = par.value.parameterName;\n\n    if (!scope.has(pn.value)) {\n      return left(new TypeError(`Undefined variable name ${pn.value}`, pn.pos));\n    }\n\n    if (seenName.has(pn.value)) return left(new TypeError(`Parameter ${pn.value} appears twice in the same parameter list`, pn.pos));\n    seenName.add(pn.value);\n  }\n\n  return right(seenName);\n}\n\nfunction checkFirstMethod(m, scope) {\n  let ins = checkParameterList(m.ins, scope);\n  if (isLeft(ins)) return ins;\n  let outs = checkParameterList(m.outs, scope);\n  if (isLeft(outs)) return outs;\n  return right((0, _utilities.setUnion)(asRight(ins), asRight(outs)));\n}\n\nfunction checkOtherMethod(m, expectedVariableNames) {\n  let scope = new SetScope(expectedVariableNames);\n  let ins = checkParameterList(m.ins, scope);\n  if (isLeft(ins)) return left(asLeft(ins));\n  let outs = checkParameterList(m.outs, scope);\n  if (isLeft(outs)) return left(asLeft(outs));\n  let foundNames = (0, _utilities.setUnion)(asRight(ins), asRight(outs));\n\n  if (!(0, _utilities.setEquals)(foundNames, expectedVariableNames)) {\n    let missingVariables = Array.from((0, _utilities.setDifference)(expectedVariableNames, foundNames)).join();\n    return left(new TypeError(`All methods in the same constraint must use the same variables; this method does not refer to variable ` + missingVariables, m.pos));\n  } // FIXME: should test for method restriction\n\n\n  return right(null);\n}\n\nfunction checkConstraint(c, scope) {\n  if (c.methods.length === 0) {\n    c.variableNames = new Set();\n    return right(c);\n  }\n\n  let vs = checkFirstMethod(c.methods[0], scope);\n  if (isLeft(vs)) return left(asLeft(vs));\n  c.variableNames = asRight(vs);\n\n  for (let i = 1; i < c.methods.length; ++i) {\n    let r = checkOtherMethod(c.methods[i], asRight(vs));\n    if (isLeft(r)) return left(asLeft(r));\n  }\n\n  return right(c);\n}\n\nfunction checkComponent(cmp) {\n  for (let c of cmp.constraints) {\n    let r = checkConstraint(c, new ComponentScope(cmp));\n    if (isLeft(r)) return left(asLeft(r));\n  }\n\n  for (let c of cmp.components) {\n    let r = checkComponent(c);\n\n    if (isLeft(r)) {\n      return left(asLeft(r));\n    }\n  }\n\n  return right(cmp);\n}\n\nfunction jsCode(endMarkers, includeMarker = true) {\n  return ps => {\n    let s = \"\";\n\n    while (true) {\n      let nc = ps.peek();\n\n      if (nc == null) {\n        if (endMarkers.includes(\"\")) return (0, _parsing.ok)(s, s.length > 0);else return (0, _parsing.failF)(() => [\"<js code>\"].concat(endMarkers), s.length > 0);\n      }\n\n      if (endMarkers.includes(nc)) {\n        if (includeMarker) {\n          (0, _parsing.item)(ps);\n          s += nc;\n        }\n\n        return (0, _parsing.ok)(s);\n      }\n\n      if ([\"}\", \"]\", \")\"].includes(nc)) return (0, _parsing.fail)([\"not \" + nc], true); // mismatched brace\n\n      let r = (0, _parsing.oneOf)(stringLiteral, templateLiteral, (0, _parsing.pBind)((0, _parsing.sat)(isOpenBrace), b => (0, _parsing.pBind)(jsCode([closingBraceOf(b)], true), c => (0, _parsing.ret)(b + c))), _parsing.item)(ps);\n      if (!r.success) return r;\n      s += r.value;\n    }\n\n    throw null; // dead code (needed to supress flowtype's complaint about mismatch in return type\n  };\n}\n\nfunction isOpenBrace(c) {\n  return c == \"(\" || c == \"{\" || c == \"[\";\n}\n\nfunction closingBraceOf(c) {\n  switch (c) {\n    case \"(\":\n      return \")\";\n\n    case \"{\":\n      return \"}\";\n\n    case \"[\":\n      return \"]\";\n  }\n\n  throw Error(\"HotDrink internal error: no closing brace defined for \" + c);\n}\n\nfunction stringLiteral(ps) {\n  let r = (0, _parsing.oneOf)((0, _parsing.pChar)(\"'\"), (0, _parsing.pChar)('\"'))(ps);\n  if (!r.success) return r;\n  const quote = r.value,\n        equote = \"\\\\\" + quote;\n  let str = r.value;\n  r = (0, _parsing.lift)((s, q) => str + s.join(\"\") + q, (0, _parsing.many)((0, _parsing.oneOf)((0, _parsing.exactString)(\"\\\\\\\\\"), (0, _parsing.exactString)(equote), (0, _parsing.sat)(c => c != quote))), (0, _parsing.pChar)(quote))(ps);\n  r.consumed = true; // we know by now the parser has consumed\n  // in case there is an error, it must be reading <eof> expecting quote\n\n  return r;\n}\n\nfunction templateLiteral(ps) {\n  const quote = \"`\",\n        equote = \"\\\\\" + quote;\n  let r = (0, _parsing.pChar)(quote)(ps);\n  if (!r.success) return r;\n  let str = r.value;\n\n  while (true) {\n    let r = (0, _parsing.must)((0, _parsing.oneOf)((0, _parsing.pChar)(quote), (0, _parsing.exactString)(\"${\"), (0, _parsing.exactString)(\"\\\\\\\\\"), (0, _parsing.exactString)(equote), _parsing.item))(ps); // throws if out of input\n\n    if (r.value == quote) {\n      str += quote;\n      break;\n    }\n\n    if (r.value == \"${\") {\n      str += \"${\";\n      str += (0, _parsing.must)(jsCode([\"}\"]))(ps).value;\n      continue;\n    }\n\n    str += r.value;\n  }\n\n  return (0, _parsing.ok)(str);\n}\n\nconst block = (0, _parsing.context)(\"<function body block>\", (0, _parsing.token)((0, _parsing.lift)((open, code_and_close) => open + code_and_close, (0, _parsing.pChar)(\"{\"), jsCode([\"}\"]))));\nexports.block = block;\nconst functionBody = (0, _parsing.context)(\"<function body>\", (0, _parsing.oneOf)(block, (0, _parsing.pBind)((0, _parsing.token)(jsCode([\";\"])), body => (0, _parsing.ret)(\"return \" + body))));\nexports.functionBody = functionBody;\n\nfunction pMethod(ps) {\n  function _met(pos, name, ins, outs, body) {\n    // for each input argument, construct a mask that tells which qualifiers were used\n    let promiseMask = ins.map(p => {\n      return (0, _utilities.foldl)((q1, q2) => orMasks(qualifier2mask(q1), q2), _constraintSystemUtil.maskNone, p.value.qualifiers.map(q => q.value));\n    });\n    const inparNames = ins.map(p => p.value.parameterName.value);\n    let code;\n\n    if (typeof body.value === \"string\") {\n      code = {\n        pos: body.pos,\n        value: new Function(inparNames.join(), body.value)\n      };\n    } else code = body; // body was a spliced expression, so body.value must be a Function already\n\n\n    return {\n      pos,\n      name,\n      ins,\n      outs,\n      code,\n      promiseMask\n    };\n  }\n\n  const bodyParser = withPos((0, _parsing.oneOf)((0, _parsing.lift)((v, _) => v, _parsing.pSplice, (0, _parsing.word)(\";\")), (0, _parsing.pBind_)((0, _parsing.word)(\"=>\"), functionBody), block));\n  return (0, _parsing.context)(\"<method>\", (0, _parsing.lift)(_met, _parsing.currentPos, (0, _parsing.opt)(withPos(_parsing.identifier), null), (0, _parsing.ignore)((0, _parsing.word)(\"(\")), qualifiedParameterList(\"*!\"), (0, _parsing.ignore)((0, _parsing.word)(\"->\")), qualifiedParameterList(\"\"), (0, _parsing.ignore)((0, _parsing.word)(\")\")), bodyParser))(ps);\n}\n\nfunction qualifier2mask(q) {\n  switch (q) {\n    case \"*\":\n      return _constraintSystemUtil.maskPromise;\n\n    case \"!\":\n      return _constraintSystemUtil.maskUpdate;\n\n    default:\n      return _constraintSystemUtil.maskNone;\n  }\n}\n\nfunction orMasks(m1, m2) {\n  return m1 | m2;\n}\n\nfunction qualifierList(qualifiers) {\n  return (0, _parsing.many)((0, _parsing.token)(withPos((0, _parsing.pChars)(qualifiers))));\n}\n\nfunction qualifiedParameterList(qualifiers = \"*!\") {\n  //\n  return (0, _parsing.sepList)(withPos((0, _parsing.lift)((qs, pname) => ({\n    qualifiers: qs,\n    parameterName: pname\n  }), qualifierList(qualifiers), withPos(_parsing.identifier))), (0, _parsing.word)(\",\"));\n}\n\nfunction pVariables(ps) {\n  return (0, _parsing.inBetween)((0, _parsing.sepList)(identifierWithOptionalInitializer, (0, _parsing.word)(\",\")), (0, _parsing.word)(\"var\"), (0, _parsing.word)(\";\"))(ps);\n}\n\nfunction identifierWithOptionalInitializer(ps) {\n  return (0, _parsing.pBind)(_parsing.currentPos, pos => (0, _parsing.oneOf)((0, _parsing.lift)(name => ({\n    pos,\n    name,\n    isReference: true\n  }), (0, _parsing.ignore)((0, _parsing.word)(\"&\")), _parsing.identifier), (0, _parsing.lift)((name, initializer) => ({\n    pos,\n    name,\n    isReference: false,\n    initializer\n  }), _parsing.identifier, (0, _parsing.opt)(withPos(initializerExpression), undefined))))(ps);\n}\n\nfunction initializerExpression(ps) {\n  return (0, _parsing.pBind_)((0, _parsing.word)(\"=\"), (0, _parsing.context)(\"<intitializer-expression>\", (0, _parsing.pBind)(jsCode([\",\", \";\"], false), e => (0, _parsing.ret)(new Function(\"return \" + e)()))))(ps);\n}\n\nfunction pConstraint(ps) {\n  return (0, _parsing.context)(\"<constraint>\", (0, _parsing.lift)((pos, name, methods) => ({\n    pos,\n    name,\n    variableNames: null,\n    methods\n  }), _parsing.currentPos, (0, _parsing.ignore)((0, _parsing.word)(\"constraint\")), (0, _parsing.opt)(withPos(_parsing.identifier), null), (0, _parsing.ignore)((0, _parsing.word)(\"{\")), (0, _parsing.many)(pMethod), (0, _parsing.ignore)((0, _parsing.word)(\"}\"))))(ps);\n}\n\nconst mkComponentAST = (pos, name, declarations) => {\n  let variableDeclarations = new Map();\n  let constraints = [];\n  let components = [];\n  let node = {\n    parent: null,\n    pos,\n    name,\n    variableDeclarations,\n    constraints,\n    components\n  };\n\n  for (let decl of declarations) {\n    switch (decl.tag) {\n      case \"variable\":\n        for (let vdecl of decl.value) {\n          variableDeclarations.set(vdecl.name, vdecl);\n        }\n\n        break;\n\n      case \"constraint\":\n        constraints.push(decl.value);\n        break;\n\n      case \"component\":\n        decl.value.parent = node;\n        components.push(decl.value);\n        break;\n    }\n  }\n\n  return node;\n};\n\nconst componentBody = (0, _parsing.many)((0, _parsing.oneOf)((0, _parsing.pBind)(pVariables, v => (0, _parsing.ret)({\n  tag: \"variable\",\n  value: v\n})), (0, _parsing.pBind)(pConstraint, v => (0, _parsing.ret)({\n  tag: \"constraint\",\n  value: v\n})), (0, _parsing.pBind)(pComponent, v => (0, _parsing.ret)({\n  tag: \"component\",\n  value: v\n}))));\n\nfunction topComponent(name) {\n  return ps => {\n    return (0, _parsing.lift)(mkComponentAST, _parsing.currentPos, withPos((0, _parsing.ret)(name)), componentBody)(ps);\n  };\n}\n\nfunction pComponent(ps) {\n  return (0, _parsing.context)(\"<component>\", (0, _parsing.lift)(mkComponentAST, _parsing.currentPos, (0, _parsing.ignore)((0, _parsing.word)(\"component\")), withPos(_parsing.identifier), (0, _parsing.ignore)((0, _parsing.word)(\"{\")), componentBody, (0, _parsing.ignore)((0, _parsing.word)(\"}\"))))(ps);\n}\n\nfunction component(strs, ...splices) {\n  let ps = (0, _parsing.hdl)(strs, ...splices);\n  let r = (0, _parsing.must)((0, _parsing.pBind_)(_parsing.manyws, (0, _parsing.oneOf)(pComponent, topComponent((0, _constraintSystemUtil.freshComponentName)()))))(ps);\n  (0, _parsing.must)(_parsing.eof)(ps);\n  return buildComponent(asRight(checkComponent(r.value)));\n}\n\nfunction buildMethod(mnode, vmap) {\n  var _mnode$name;\n\n  return new _method.default(vmap.size, mnode.ins.map(v => vmap.get(v.value.parameterName.value)), mnode.outs.map(v => vmap.get(v.value.parameterName.value)), mnode.promiseMask, mnode.code.value, (mnode === null || mnode === void 0 ? void 0 : (_mnode$name = mnode.name) === null || _mnode$name === void 0 ? void 0 : _mnode$name.value) || \"\");\n}\n\nfunction buildAndAddConstraint(owner, cnode) {\n  let variableNames = cnode.variableNames;\n  if (variableNames == null) throw Error(\"Constraint node must be type checked before it is used for building a constraint\");\n  let name2index = new Map();\n  let index = 0;\n\n  for (let v of variableNames) name2index.set(v, index++);\n\n  let ms = cnode.methods.map(m => buildMethod(m, name2index));\n  let vrefs = Array.from(name2index.keys(), name => owner.getVariableReference(name));\n  let cspec = new _constraintSpec.default(ms);\n  let name = cnode.name != null ? cnode.name.value : null;\n  return owner.emplaceConstraint(name, cspec, vrefs, false);\n}\n\nfunction buildComponent(compNode, owner = null) {\n  let comp = new _component.default(compNode.name.value);\n  if (owner != null) owner.addComponent(comp);\n\n  for (let vdecl of compNode.variableDeclarations.values()) {\n    if (vdecl.isReference) comp.emplaceVariableReference(vdecl.name);else {\n      let init = vdecl.initializer != null ? vdecl.initializer.value : undefined;\n      comp.emplaceVariable(vdecl.name, init);\n    }\n  }\n\n  compNode.constraints.forEach(c => buildAndAddConstraint(comp, c));\n  compNode.components.forEach(c => buildComponent(c, comp));\n  return comp;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _hdconsole = require(\"../hdconsole\");\n\nvar _constraintSpec = _interopRequireDefault(require(\"./constraint-spec\"));\n\nvar _constraintSystem = _interopRequireDefault(require(\"./constraint-system\"));\n\nvar _variableReference = _interopRequireDefault(require(\"./variable-reference\"));\n\nvar _variable = _interopRequireDefault(require(\"./variable\"));\n\nvar _constraint = _interopRequireDefault(require(\"./constraint\"));\n\nvar _constraintSystemUtil = require(\"./constraint-system-util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Component {\n  // used for generating fresh constraint names\n  constructor(name) {\n    this._owner = null;\n    this._system = null;\n    this._name = name;\n    this._vars = new Set();\n    this._varRefs = new Map();\n    this._varRefNames = new Map();\n    this._constraints = new Map();\n    this._constraintNames = new Map();\n    this._nextFreshCIndex = 0;\n    this._components = new Map();\n  }\n\n  clone(name = (0, _constraintSystemUtil.freshComponentName)()) {\n    let that = new Component(name);\n    let o2n = new Map(); // old2new\n    // clone variable references\n\n    for (let [n, v] of this._varRefs) {\n      if (v.isOwningReference()) {\n        o2n.set(v, that.emplaceVariable(n));\n      } else o2n.set(v, that.emplaceVariableReference(n));\n    } // clone constraints\n\n\n    for (let [n, c] of this._constraints) {\n      let nrefs = c._varRefs.map(vr => o2n.get(vr));\n\n      if (!(0, _constraintSystemUtil.isStay)(c)) that.emplaceConstraint(n, c._cspec, nrefs, c._optional);\n    } // clone nested components\n\n\n    for (let [n, cmp] of this._components) that.addComponent(cmp.clone(n));\n\n    return that;\n  }\n\n  get system() {\n    return this._system;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  connectSystem(system) {\n    if (this._owner != null) {\n      _hdconsole.hdconsole.error(`Tried to connect the nested component ${this._name}`);\n\n      return false;\n    }\n\n    if (this._system === system) {\n      _hdconsole.hdconsole.warn(`Same system connected twice to component ${this._name}`);\n\n      return false;\n    }\n\n    if (this._system != null) {\n      _hdconsole.hdconsole.error(`Trying to connect an already connected component ${this._name} to a another system`);\n\n      return false;\n    }\n\n    this._connectSystem(system);\n\n    return true;\n  }\n\n  _connectSystem(system) {\n    this._system = system; // must set system already here\n    // so that connect notifications\n    // compare systems correctly FIXME: think abou this\n\n    for (let c of this._components.values()) c._connectSystem(system);\n\n    for (let c of this._constraints.values()) if (c._danglingCount === 0) system.addConstraint(c);\n  }\n\n  disconnectSystem() {\n    if (this._system == null) {\n      _hdconsole.hdconsole.error(`Tried to disconnect a component ${this._name} that is already disconnected`);\n\n      return false;\n    }\n\n    if (this._owner != null) {\n      _hdconsole.hdconsole.error(`Tried to disconnect a subcomponent ${this._name} when owner is still connected`);\n\n      return false;\n    }\n\n    this._disconnectSystem();\n\n    return true;\n  }\n\n  _disconnectSystem() {\n    for (let c of this._components.values()) c._disconnectSystem();\n\n    for (let c of this._constraints.values()) this._system.removeConstraint(c); // cast OK since we know system is connected\n\n\n    this._system = null;\n  }\n\n  addComponent(c) {\n    if (c._owner != null) {\n      _hdconsole.hdconsole.error(`Tried to add component ${c._name} that already has an owner to component ${this._name}`);\n\n      return;\n    }\n\n    if (c._system != null) {\n      _hdconsole.hdconsole.error(`Tried to add to component ${this._name} the component ${c._name} that is connected to a system`);\n\n      return;\n    }\n\n    if (this._components.has(c._name)) {\n      _hdconsole.hdconsole.error(`Tried to add the component whose name ${c._name} already exists`);\n\n      return;\n    }\n\n    c._owner = this;\n\n    this._components.set(c._name, c);\n\n    if (this._system != null) c.connectSystem(this._system);\n  }\n\n  emplaceVariable(n, v) {\n    _hdconsole.hdconsole.assert(!this._varRefs.has(n), `Trying to add variable ${n} twice to component ${this._name}`);\n\n    let vr = (0, _constraintSystemUtil.mkVariable)(this, v);\n\n    this._varRefs.set(n, vr);\n\n    this._varRefNames.set(vr, n);\n\n    this._vars.add(vr.value); // cast ok, vr is an owning reference\n\n\n    let name = \"__stay__\" + n;\n    let c = new _constraint.default(this, (0, _constraintSystemUtil.stayConstraintSpec)(), [vr], true);\n\n    this._constraints.set(name, c);\n\n    this._constraintNames.set(c, name);\n\n    return vr;\n  }\n\n  emplaceVariableReference(n) {\n    _hdconsole.hdconsole.assert(!this._varRefs.has(n), `Trying to add variable reference ${n} twice to component ${this._name}`);\n\n    let vr = new _variableReference.default(this);\n\n    this._varRefs.set(n, vr);\n\n    this._varRefNames.set(vr, n);\n\n    return vr;\n  }\n\n  emplaceConstraint(n, cspec, vrefs, optional = false) {\n    let c = new _constraint.default(this, cspec, vrefs, optional);\n    if (n == null) n = this._nextFreshConstraintName();\n    if (this._constraints.has(n)) throw `Constraint ${n} already exists in component ${this._name}`;\n\n    this._constraints.set(n, c);\n\n    this._constraintNames.set(c, n);\n\n    return c;\n  }\n\n  _nextFreshConstraintName() {\n    return \"c#\" + this._nextFreshCIndex++;\n  }\n\n  variableReferenceName(r) {\n    let s = this._varRefNames.get(r);\n\n    return s == null ? \"<unnamed>\" : s;\n  }\n\n  constraintName(c) {\n    return this._constraintNames.get(c);\n  }\n\n  getVariableReference(n) {\n    let r = this._varRefs.get(n);\n\n    if (r != null) return r;\n    if (this._owner == null) return undefined;\n    return this._owner.getVariableReference(n);\n  }\n\n  get vs() {\n    const comp = this;\n\n    function varRef(property) {\n      return comp._varRefs.get(property);\n    }\n\n    return new Proxy({}, {\n      get: function (_, property) {\n        return varRef(property);\n      },\n      set: function (_, property, value) {\n        let ref = varRef(property);\n\n        if (ref == null) {\n          _hdconsole.hdconsole.warn(`Linking an unknown variable ${property}`);\n\n          return false; // this causes a TypeError in strict mode\n        } else {\n          ref.link(value);\n          return true;\n        }\n      }\n    });\n  }\n\n  get cs() {\n    const comp = this;\n    return new Proxy({}, {\n      get: function (_, property) {\n        return comp._constraints.get(property);\n      }\n    });\n  }\n\n  get components() {\n    const comp = this;\n    return new Proxy({}, {\n      get: function (_, property) {\n        return comp._components.get(property);\n      }\n    });\n  }\n\n}\n\nexports.default = Component;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _hdconsole = require(\"../hdconsole\");\n\nvar _method = _interopRequireDefault(require(\"./method\"));\n\nvar _variableReference = _interopRequireDefault(require(\"./variable-reference\"));\n\nvar _utilities = require(\"../utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass ConstraintSpec {\n  constructor(methods) {\n    this._methods = new Set(methods);\n\n    _hdconsole.hdconsole.assert(this._methods.size > 0, \"Constraint specification must have at least one method.\");\n\n    const firstMethod = (0, _utilities.first)(this._methods);\n\n    if (firstMethod == null) {\n      throw \"Constraint specification must have at least one method.\"; //should not happend, this keeps flow happy\n    }\n\n    const nvars = firstMethod === null || firstMethod === void 0 ? void 0 : firstMethod.nvars;\n    this._nvars = nvars;\n    this._v2ins = [];\n\n    for (let i = 0; i < nvars; ++i) this._v2ins.push([]);\n\n    for (let m of this._methods) {\n      _hdconsole.hdconsole.assert(m.nvars === nvars, `All methods in constraint specification must have the same number of variables`);\n\n      for (let i of m.outs()) {\n        this._v2ins[i].push(m);\n      }\n    }\n  }\n\n  get nvars() {\n    return this._nvars;\n  }\n\n  ins(vIndex) {\n    return this._v2ins[vIndex];\n  }\n\n  insSize(vIndex) {\n    return this._v2ins[vIndex].length;\n  }\n\n  methods() {\n    return this._methods;\n  }\n\n  hasMethod(m) {\n    return this._methods.has(m);\n  }\n\n  prettyPrint(prefix, vrefs) {\n    let s = \"\";\n\n    for (let m of this._methods) {\n      s += prefix + m.prettyPrint(vrefs) + \"\\n\";\n    }\n\n    return s;\n  }\n\n}\n\nexports.default = ConstraintSpec;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enforceStayMethod = enforceStayMethod;\nexports.freshComponentName = void 0;\nexports.freshNameGenerator = freshNameGenerator;\nexports.isConstraint = isConstraint;\nexports.isMethod = isMethod;\nexports.isOwnerOf = isOwnerOf;\nexports.isStay = isStay;\nexports.isVariable = isVariable;\nexports.maskUpdate = exports.maskPromiseUpdate = exports.maskPromise = exports.maskNone = void 0;\nexports.mkVariable = mkVariable;\nexports.stayConstraintSpec = stayConstraintSpec;\n\nvar _component = _interopRequireDefault(require(\"./component\"));\n\nvar _variableReference = _interopRequireDefault(require(\"./variable-reference\"));\n\nvar _variable = _interopRequireDefault(require(\"./variable\"));\n\nvar _constraint = _interopRequireDefault(require(\"./constraint\"));\n\nvar _method = _interopRequireDefault(require(\"./method\"));\n\nvar _constraintSpec = _interopRequireDefault(require(\"./constraint-spec\"));\n\nvar _utilities = require(\"../utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mkVariable(owner, v) {\n  let r = new _variableReference.default(owner);\n  r.value = new _variable.default(r, v);\n  return r;\n}\n\nfunction freshNameGenerator(prefix) {\n  let n = 0;\n  return () => prefix + n++;\n}\n\nconst freshComponentName = freshNameGenerator(\"comp#\");\nexports.freshComponentName = freshComponentName;\n\nfunction isOwnerOf(c1, c2) {\n  while (c1 !== c2) {\n    if (c2._owner == null) return false;else c2 = c2._owner;\n  }\n\n  return true;\n} // FIXME: these are hacks because of trouble with instanceof and babel\n\n\nfunction isConstraint(c) {\n  return c.hasOwnProperty(\"_cspec\");\n}\n\nfunction isVariable(v) {\n  return v.hasOwnProperty(\"_activation\");\n}\n\nfunction isMethod(v) {\n  return v.hasOwnProperty(\"_promiseMask\");\n}\n\nfunction isStay(c) {\n  const method = (0, _utilities.first)(c._cspec._methods);\n  return method != null && method.nvars === 1 && method.code.toString() === \"a => a\";\n}\n\nfunction enforceStayMethod(stay) {\n  stay.selectedMethod = (0, _utilities.first)(stay._cspec._methods);\n}\n\nconst maskNone = 0;\nexports.maskNone = maskNone;\nconst maskPromise = 1;\nexports.maskPromise = maskPromise;\nconst maskUpdate = 2;\nexports.maskUpdate = maskUpdate;\nconst maskPromiseUpdate = maskPromise | maskUpdate;\nexports.maskPromiseUpdate = maskPromiseUpdate;\n\nfunction stayConstraintSpec() {\n  return new _constraintSpec.default([new _method.default(1, [0], [0], [maskNone], a => a, \"stay\")]);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _graphAlgorithms = require(\"../graph-algorithms\");\n\nvar _computationGraph = require(\"../computation-graph\");\n\nvar _hdconsole = require(\"../hdconsole\");\n\nvar _component = _interopRequireDefault(require(\"./component\"));\n\nvar _method = _interopRequireDefault(require(\"./method\"));\n\nvar _variable = _interopRequireDefault(require(\"./variable\"));\n\nvar _solutionGraph = require(\"./solution-graph\");\n\nvar _simplePlanner = _interopRequireDefault(require(\"./simple-planner\"));\n\nvar _constraintSystemUtil = require(\"./constraint-system-util\");\n\nvar _utilities = require(\"../utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass ConstraintSystem {\n  // FIXME: move to a better place\n  allConstraints() {\n    return (0, _utilities.join)([this._musts, this._optionals.entries()]);\n  }\n\n  addComponent(c) {\n    return c.connectSystem(this);\n  }\n\n  removeComponent(c) {\n    if (c.system != this) {\n      console.warn(`Tried to remove component ${c._name} from a constraint system in which it does not exist.`);\n      return false;\n    }\n\n    return c.disconnectSystem();\n  }\n\n  prettyPrint() {\n    let s = \"-- musts --\\n\";\n\n    for (let m of this._musts) s += m.prettyPrint();\n\n    s += \"-- optionals --\\n\";\n\n    for (let m of this._optionals.entries()) s += m.prettyPrint();\n\n    return s;\n  }\n\n  constructor() {\n    this._optionals = new _utilities.PriorityList();\n    this._musts = new Set();\n    this._dirty = new Set();\n    this._v2cs = new _utilities.OneToManyMap();\n    this._usg = new _solutionGraph.UpstreamSolutionGraph(this);\n    this._dsg = new _solutionGraph.DownstreamSolutionGraph(this);\n  }\n\n  update() {\n    this.plan(this.allConstraints()); // FIXME: a little wasteful since plan iterates\n    // all vars of all constraints, and same vars appear many time. OK for now\n\n    this.solveFromConstraints(this.allConstraints());\n  }\n\n  variables() {\n    return this._v2cs.keys();\n  }\n\n  constraints(v) {\n    return this._v2cs.values(v);\n  }\n\n  *allConstraints() {\n    for (let c of this._musts) yield c;\n\n    for (let c of this._optionals.entries()) yield c;\n  }\n\n  isMust(c) {\n    return this._musts.has(c);\n  }\n\n  isOptional(c) {\n    return !this._musts.has(c);\n  }\n\n  addConstraint(c) {\n    for (let v of c.variables()) this._v2cs.add(v, c);\n\n    if (c._optional) this._optionals.pushBack(c);else this._musts.add(c);\n\n    this._dirty.add(c);\n  }\n\n  removeConstraint(c) {\n    for (let v of c.variables()) {\n      this._v2cs.remove(v, c);\n\n      if (this._v2cs.count(v) == 0) this._v2cs.removeKey(v);\n    }\n\n    if (c._optional) this._optionals.remove(c);else this._musts.delete(c);\n\n    this._dirty.delete(c);\n  }\n\n  setDirty(c) {\n    this._dirty.add(c);\n  }\n\n  gatherUpstreamConstraints(vs) {\n    let r = (0, _utilities.filter)(v => (0, _constraintSystemUtil.isConstraint)(v), (0, _graphAlgorithms.reverseTopoSortFrom)(this._usg, vs));\n    return r; // cast is to shut up flowtype\n  }\n\n  gatherDownstreamConstraints(vs) {\n    let r = (0, _utilities.filter)(v => (0, _constraintSystemUtil.isConstraint)(v), (0, _graphAlgorithms.reverseTopoSortFrom)(this._dsg, vs));\n    return r;\n  }\n\n  gatherDownstreamVariables(vs) {\n    let r = (0, _utilities.filter)(v => (0, _constraintSystemUtil.isVariable)(v), (0, _graphAlgorithms.reverseTopoSortFrom)(this._dsg, vs));\n    return r;\n  }\n\n  promoteVariable(v) {\n    this.promoteConstraint(this.getStay(v));\n  }\n\n  promoteConstraint(c) {\n    this._optionals.promote(c);\n  }\n\n  demoteConstraint(c) {\n    this._optionals.demote(c);\n  }\n\n  strength(c) {\n    if (this.isMust(c)) return this._optionals.highestPriority + 1;else return this._optionals.priority(c);\n  }\n\n  getStay(v) {\n    for (let c of this._v2cs.values(v)) {\n      if (c.name == \"__stay__\" + v.name) return c;\n    }\n\n    _hdconsole.hdconsole.assert(false, \"Variable's stay constraint does not exists\");\n\n    return null;\n  }\n\n  planDirty() {\n    return this.plan(this._dirty);\n  }\n\n  updateDirty() {\n    this.planDirty();\n    this.executeDirty();\n\n    this._dirty.clear();\n  }\n\n  plan(toEnforce) {\n    let vs = (0, _utilities.join)((0, _utilities.map)(c => c.variables(), toEnforce)); // all variables from all constraints in the enforce queues\n\n    let constraintsThatNeedNewPlan = this.gatherUpstreamConstraints(vs); // gather all constraints upstream from these variables.\n    // This includes all constraints reachable through any method\n    // of an unenforced constraint. Quickplan does not do this since\n    // it has a separate reenforcing phase, but we put all constraints\n    // that may need to change into one bunch.\n    // The point is that unenforced constraints may become enforceable,\n    // and then they may force resolving of their upstream constraints.\n\n    let enforceable = new Set(); // this is the set of constraints that is determined to be enforceable\n\n    let forcedSet = new Set(); // this is the set of variables that are forced with the enforceable\n    // methods\n\n    let opts = new _utilities.BinaryHeap((c1, c2) => this.strength(c1) > this.strength(c2)); // initialize simple planner with all must constraints (should be enforceable)\n\n    let sp = new _simplePlanner.default();\n    (0, _utilities.forEach)(c => {\n      c.clearSelectedMethod();\n\n      c._initPruningData(); // FIXME: maybe just make methods viable again\n\n\n      if (this.isMust(c)) {\n        enforceable.add(c);\n        sp.addConstraint(c);\n      } else {\n        opts.push(c);\n      }\n    }, constraintsThatNeedNewPlan); //\n\n    _hdconsole.hdconsole.assert(sp.plan(), \"no plan for must constraints\"); // the conflicting constraints are in sp.constraints()\n\n\n    while (!opts.empty()) {\n      let opt = opts.pop();\n\n      switch (sp.extendPlanIfPossible(opt, forcedSet)) {\n        case false:\n          break;\n\n        case true:\n          enforceable.add(opt);\n\n          this._prune(opt, enforceable, forcedSet);\n\n          break;\n\n        case null:\n          sp.clear();\n\n          for (let c of enforceable) {\n            //            c.clearSelectedMethod();\n            sp.addConstraint(c);\n          }\n\n          sp.addConstraint(opt);\n\n          if (sp.plan()) {\n            enforceable.add(opt);\n\n            this._prune(opt, enforceable, forcedSet);\n          } else {\n            sp.removeConstraint(opt);\n            opt.clearSelectedMethod();\n            sp.undoChangesAfterFailedPlan();\n          }\n\n          break;\n      }\n    }\n\n    return enforceable;\n  } // prune starting from constraint c\n\n\n  _prune(c, constraintsOfInterest, forcedSet) {\n    let inspected = new Set(); // initialize worklist with the variables that c forces\n\n    let worklist = Array.from(c._forcedVariables, i => c.i2v(i));\n\n    while (worklist.length > 0) {\n      let v = worklist.pop();\n      inspected.add(v);\n      if (forcedSet.has(v)) continue;\n      forcedSet.add(v); // inspect all constraints connected to v\n\n      for (let cn of this.constraints(v)) {\n        if (!cn.isEnforced()) continue;\n        if (!constraintsOfInterest.has(cn)) continue;\n\n        for (let vv of cn._makeMethodsNonviableByVariable(v)) {\n          // vv iterates over the set of newly forced variables\n          if (!inspected.has(vv)) {\n            worklist.push(vv);\n          }\n        }\n      }\n    }\n  }\n\n  solveFromConstraints(cs) {\n    this.solve((0, _utilities.join)((0, _utilities.map)(c => c.downstreamVariables(), cs)));\n  }\n\n  solve(vs) {\n    let cs = [];\n\n    for (let v of vs) {\n      let c = this.getSourceConstraint(v);\n      if (c != null) cs.push(c);\n    } // Find the constraints that write to variables in vs.\n    // Usually these are stay constraints, but could be other constraints if the\n    // variable cannot stay in the chosen plan\n    // NOTE: every variable must have a stay or other constraint that writes to it. Otherwise\n    // constraints downstream from it are not found.\n\n\n    let dsc = Array.from(this.gatherDownstreamConstraints(cs)).reverse();\n\n    for (let c of dsc) this.scheduleConstraint(c);\n  }\n\n  executeDirty() {\n    let dsc = Array.from(this.gatherDownstreamConstraints(this._dirty)).reverse();\n\n    for (let c of dsc) this.scheduleConstraint(c);\n  }\n\n  getSourceConstraint(v) {\n    for (let c of this._v2cs.values(v)) {\n      if (c.isOutputVariable(v)) return c;\n    }\n\n    return null;\n  }\n\n  scheduleConstraint(c) {\n    if (!c.isEnforced()) return; // if there is no selected method, there  is nothing to schedule\n\n    let m = c.selectedMethod;\n    let inDeferreds = Array.from(c.ins(m), v => v._activation); // push new activations to all outputs, but remember the previous onces\n\n    let prevActs = [];\n    (0, _utilities.forEach)(v => {\n      prevActs.push(v._activation);\n      v.pushNewActivation();\n    }, c.outs(m));\n    let outDeferreds = Array.from(c.outs(m), v => v._activation);\n    new _computationGraph.MethodActivation(m.code, m._promiseMask).execute(inDeferreds, outDeferreds); // only release the old activations of outputs here; after a new method activation has been executed\n\n    (0, _utilities.forEach)(v => (0, _utilities.release)(v), prevActs);\n  } // touch order is fixed, last parameter gets highest\n\n\n  scheduleCommand(ins, outs, f) {\n    let inDeferreds = Array.from(ins, v => v._activation);\n    let outArray = Array.from(outs); // push new activations to all outputs, but remember the previous onces\n\n    let prevActs = [];\n    (0, _utilities.forEach)(v => {\n      prevActs.push(v._activation);\n      v.pushNewActivation();\n    }, outArray);\n    let outDeferreds = Array.from(outArray, v => v._activation);\n    new _computationGraph.MethodActivation(f, Array(inDeferreds.length).fill(false)).execute(inDeferreds, outDeferreds); // only release the old activations of outputs here; after a new method activation has been executed\n\n    (0, _utilities.forEach)(v => (0, _utilities.release)(v), prevActs);\n    outArray.forEach(v => this.promoteVariable(v));\n    let enforceable = this.plan((0, _utilities.map)(v => this.getStay(v), outArray));\n    this.solve(outArray);\n  }\n\n}\n\nexports.default = ConstraintSystem;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _hdconsole = require(\"../hdconsole\");\n\nvar _constraintSystem = _interopRequireDefault(require(\"./constraint-system\"));\n\nvar _constraintSpec = _interopRequireDefault(require(\"./constraint-spec\"));\n\nvar _method = _interopRequireDefault(require(\"./method\"));\n\nvar _variableReference = _interopRequireDefault(require(\"./variable-reference\"));\n\nvar _variable = _interopRequireDefault(require(\"./variable\"));\n\nvar _constraintSystemUtil = require(\"./constraint-system-util\");\n\nvar _component = _interopRequireDefault(require(\"./component\"));\n\nvar _utilities = require(\"../utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Constraint {\n  // used in pruning\n  // used in pruning\n  // used in pruning\n  prettyPrint() {\n    let s = \"constraint \" + this.name + \" {\\n\";\n    s += \"  \";\n\n    for (let vr of this._varRefs) s += vr.prettyPrint() + \"; \";\n\n    s += \"\\n\";\n    s += this._cspec.prettyPrint(\"  \", this._varRefs);\n    s += \"}\\n\";\n    return s;\n  }\n\n  substitute(vrs) {\n    return new Constraint(this._owner, this._cspec, vrs, this._optional);\n  }\n\n  constructor(owner, cspec, vrefs, optional = false) {\n    this._owner = owner;\n    this._cspec = cspec;\n    this._varRefs = [];\n    this._vars = Array(cspec.nvars).fill(null);\n    this._used = Array(cspec.nvars).fill(true); // FIXME: this is probably not used anymore\n\n    this._danglingCount = cspec.nvars;\n    this._optional = optional; // _vars is only used when all refs are resolved\n\n    this._indices = new Map();\n    let i = 0;\n\n    for (let r of vrefs) {\n      _hdconsole.hdconsole.assert((0, _constraintSystemUtil.isOwnerOf)(r._owner, this._owner), `Constructing constraint ${this.name} with a foreign variable reference`);\n\n      this._varRefs[i] = r;\n      {\n        let index = i; // for correct scoping\n\n        r.subscribe(v => {\n          if (v !== null) {\n            // connect\n            if (this._vars[index] !== null) console.log(\"NOTNULL\", this._vars[index]); // FIXME: is this necessary still?\n\n            this._vars[index] = v;\n\n            this._indices.set(v, index);\n\n            if (--this._danglingCount == 0) {\n              let s = this.system;\n              if (s != null) s.addConstraint(this);\n            }\n          } else {\n            // disconnect\n            if (this._vars[index] === null) return; // already disconnected\n\n            if (this._danglingCount++ == 0) {\n              let s = this.system;\n              if (s != null) s.removeConstraint(this);\n            }\n\n            this._indices.delete(this._vars[index]);\n\n            this._vars[index] = null;\n          }\n        });\n      }\n      ++i;\n    }\n\n    this._initPruningData();\n\n    this.clearSelectedMethod();\n  }\n\n  equals(c) {\n    return this === c;\n  }\n\n  get name() {\n    return this._owner == null ? \"<unnamed>\" : this._owner.constraintName(this);\n  }\n\n  get owner() {\n    return this._owner;\n  }\n\n  get nvars() {\n    return this._cspec.nvars;\n  }\n\n  get system() {\n    return this._owner.system;\n  }\n\n  i2v(i) {\n    return this._vars[i];\n  }\n\n  v2i(v) {\n    _hdconsole.hdconsole.assert(this._indices.has(v), \"unknown variable in Constraint.v2i: \" + v.name);\n\n    return this._indices.get(v);\n  }\n\n  variables() {\n    return this._vars;\n  }\n\n  outs(m) {\n    return m.vOuts(this._vars);\n  }\n\n  ins(m) {\n    return m.vIns(this._vars);\n  }\n\n  nonOuts(m) {\n    return m.vNonOuts(this._vars);\n  }\n\n  methods() {\n    return this._cspec.methods();\n  }\n\n  hasMethod(m) {\n    return this._cspec.hasMethod(m);\n  }\n\n  viableMethods() {\n    return this._viableMethods;\n  }\n\n  get selectedMethod() {\n    return this._selectedMethod;\n  }\n\n  set selectedMethod(m) {\n    _hdconsole.hdconsole.assert(this._cspec.hasMethod(m), \"selecting a method not in the constraint\");\n\n    this._selectedMethod = m;\n\n    for (let i of m.ins()) this._used[i] = true;\n  }\n\n  clearSelectedMethod() {\n    this._selectedMethod = null;\n  }\n\n  isEnforced() {\n    return this._selectedMethod != null;\n  }\n\n  isOutputVariable(v) {\n    if (this.selectedMethod == null) return false;else return this.selectedMethod.isOut(this.v2i(v));\n  }\n\n  isInputVariable(v) {\n    if (this.selectedMethod == null) return false;else return this.selectedMethod.isIn(this.v2i(v));\n  }\n\n  isNonOutputVariable(v) {\n    if (this.selectedMethod == null) return false;else return this.selectedMethod.isNonOut(this.v2i(v));\n  }\n\n  downstreamVariables() {\n    if (this.selectedMethod == null) return (0, _utilities.mkEmptyIterable)();else return this.selectedMethod.vOuts(this._vars);\n  }\n\n  downstreamAndUndetermined() {\n    if (this.selectedMethod == null) return this._vars;else return this.selectedMethod.vOuts(this._vars);\n  }\n\n  upstreamVariables() {\n    if (this.selectedMethod == null) return (0, _utilities.mkEmptyIterable)();else return this.selectedMethod.vNonOuts(this._vars);\n  }\n\n  upstreamAndUndetermined() {\n    if (this.selectedMethod == null) return this._vars;else return this.selectedMethod.vNonOuts(this._vars);\n  }\n\n  _initPruningData() {\n    this._viableMethods = new Set();\n    this._forcedVariables = new Set();\n    this._outCounts = Array(this.nvars).fill(0);\n\n    for (let m of this.methods()) {\n      this._viableMethods.add(m);\n\n      for (let i of m.outs()) this._outCounts[i] += 1;\n    }\n\n    const vmcount = this._viableMethods.size;\n\n    for (let i = 0; i < this.nvars; ++i) {\n      if (this._outCounts[i] === vmcount) this._forcedVariables.add(i);\n    }\n  }\n\n  _makeMethodViable(m) {\n    _hdconsole.hdconsole.assert(!this._viableMethods.has(m), \"making a method viable twice\");\n\n    _hdconsole.hdconsole.assert(this.hasMethod(m), \"unknown method\");\n\n    let vmcountOld = this._viableMethods.size;\n\n    this._viableMethods.add(m);\n\n    let newlyUnforced = [];\n\n    for (let i of m.outs()) this._outCounts[i] += 1;\n\n    for (let i of m.nonOuts()) {\n      if (this._outCounts[i] === vmcountOld) {\n        this._forcedVariables.delete(i);\n\n        newlyUnforced.push(i);\n      }\n    }\n\n    return newlyUnforced;\n  } // returns the indices of the newly forced variables\n\n\n  _makeMethodNonviable(m) {\n    _hdconsole.hdconsole.assert(this._viableMethods.has(m), \"making a method nonviable twice\");\n\n    _hdconsole.hdconsole.assert(this._viableMethods.size >= 2, \"trying to make the last viable method nonviable\");\n\n    this._viableMethods.delete(m);\n\n    let vmcount = this._viableMethods.size;\n    let newlyForced = [];\n\n    for (let i of m.outs()) this._outCounts[i] -= 1;\n\n    for (let i of m.nonOuts()) {\n      if (this._outCounts[i] === vmcount) {\n        this._forcedVariables.add(i);\n\n        newlyForced.push(i);\n      }\n    } // FIXME: remove at some point\n\n\n    for (let i = 0; i < this._outCounts.length; ++i) _hdconsole.hdconsole.assert(this._outCounts[i] >= 0);\n\n    return newlyForced;\n  }\n\n  _makeMethodsNonviableByVariable(v) {\n    let vi = this.v2i(v);\n    if (this._forcedVariables.has(vi)) return (0, _utilities.mkEmptyIterable)();\n    let newlyForced = new Set();\n\n    for (let m of (0, _utilities.filter)(m => m.isOut(vi), this._viableMethods)) {\n      for (let vv of (0, _utilities.map)(v => this.i2v(v), this._makeMethodNonviable(m))) {\n        newlyForced.add(vv);\n      }\n    }\n\n    return newlyForced;\n  }\n\n}\n\nexports.default = Constraint;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _hdconsole = require(\"../hdconsole\");\n\nvar _utilities = require(\"../utilities\");\n\nclass Method {\n  constructor(nvars, ins, outs, promiseMask, code, name) {\n    this._ins = new Set(ins);\n    this._outs = new Set(outs); // compute _nonOuts\n\n    let indices = Array.from(Array(nvars).keys()); // [0, 1, ..., nvars-1]\n\n    this._outs.forEach(i => indices[i] = null); // mark with null the indices that are outputs\n\n\n    this._nonOuts = new Set();\n\n    for (let e of indices) {\n      if (e != null) this._nonOuts.add(e);\n    }\n\n    this._promiseMask = Array.from(promiseMask);\n\n    _hdconsole.hdconsole.assert(this._ins.size === this._promiseMask.length, \"Number of input arguments and length of promise mask must be the same\");\n\n    this.code = code;\n    if (name != null) this._name = name;\n  }\n\n  get name() {\n    return this._name == null ? \"\" : this._name;\n  }\n\n  get nvars() {\n    return this._outs.size + this._nonOuts.size;\n  }\n\n  validIndex(i) {\n    return i >= 0 && i < this.nvars;\n  }\n\n  ins() {\n    return this._ins;\n  }\n\n  outs() {\n    return this._outs;\n  }\n\n  nonOuts() {\n    return this._nonOuts;\n  }\n\n  vIns(vs) {\n    return (0, _utilities.map)(i => vs[i], this._ins);\n  }\n\n  vOuts(vs) {\n    return (0, _utilities.map)(i => vs[i], this._outs);\n  }\n\n  vNonOuts(vs) {\n    return (0, _utilities.map)(i => vs[i], this._nonOuts);\n  }\n\n  nIns() {\n    return this._ins.size;\n  }\n\n  nOuts() {\n    return this._outs.size;\n  }\n\n  nNonOuts() {\n    return this._nonOuts.size;\n  }\n\n  isIn(i) {\n    return this._ins.has(i);\n  }\n\n  isOut(i) {\n    return this._outs.has(i);\n  }\n\n  isNonOut(i) {\n    return this._nonOuts.has(i);\n  }\n\n  prettyPrint(vrefs) {\n    let s = this.name + \"(\";\n\n    for (const i of this._nonOuts) s += vrefs[i].name + \" \";\n\n    s += \"->\";\n\n    for (const i of this._outs) s += \" \" + vrefs[i].name;\n\n    s += \");\";\n    return s;\n  }\n\n}\n\nexports.default = Method;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _variable = _interopRequireDefault(require(\"./variable\"));\n\nvar _constraint = _interopRequireDefault(require(\"./constraint\"));\n\nvar _method = _interopRequireDefault(require(\"./method\"));\n\nvar _hdconsole = require(\"../hdconsole\");\n\nvar _utilities = require(\"../utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass SimplePlanner {\n  // record if selected method changes, so we can undo\n  // to a previous solution\n  constructor() {\n    this._v2cs = new _utilities.OneToManyMap();\n    this._freeVars = new Set();\n    this._forcedByPlan = new Map();\n    this._changeList = [];\n  }\n\n  addConstraint(c) {\n    for (let v of c.variables()) {\n      this._v2cs.add(v, c);\n\n      switch (this._v2cs.count(v)) {\n        case 1:\n          this._freeVars.add(v);\n\n          break;\n\n        case 2:\n          this._freeVars.delete(v);\n\n          break;\n      }\n    }\n  }\n\n  removeConstraint(c) {\n    for (let v of c.variables()) {\n      this._v2cs.remove(v, c);\n\n      switch (this._v2cs.count(v)) {\n        case 0:\n          this._freeVars.delete(v);\n\n          this._v2cs.removeKey(v);\n\n          break;\n\n        case 1:\n          this._freeVars.add(v);\n\n          break;\n      }\n    }\n  }\n\n  clear() {\n    this._v2cs.clear();\n\n    this._freeVars.clear(); //    this._forcedByPlan.clear();\n\n  }\n\n  plan() {\n    let foundFree = true;\n\n    while (foundFree) {\n      foundFree = false;\n\n      for (let [c, m] of this.freeMethods()) {\n        foundFree = true;\n        let oldm = c.selectedMethod;\n\n        if (oldm !== m && oldm != null) {\n          this._changeList.push([c, oldm]);\n\n          for (let v of c.outs(oldm)) this._forcedByPlan.delete(v); // clear old methods forced by data\n\n        }\n\n        c.selectedMethod = m;\n\n        for (let v of c.outs(m)) this._forcedByPlan.set(v, m);\n\n        this.removeConstraint(c);\n      }\n    }\n\n    if (this._v2cs.countKeys() === 0) {\n      this._changeList = []; // no undo info after successful plan\n\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  undoChangesAfterFailedPlan() {\n    for (let [c, m] of this._changeList) {\n      let oldm = c.selectedMethod;\n\n      if (oldm != null) {\n        for (let v of c.outs(oldm)) this._forcedByPlan.delete(v);\n      }\n\n      for (let v of c.outs(m)) this._forcedByPlan.set(v, m);\n\n      c.selectedMethod = m;\n    }\n  }\n\n  extendPlanIfPossible(c, forcedSet) {\n    // FIXME: special case for stays for speed\n    if ((0, _utilities.every)(m => (0, _utilities.some)(v => forcedSet.has(v), c.outs(m)), c._viableMethods)) return false; // if every method has some output to a forced variable,\n    // the constraint is unenforceable\n\n    if ((0, _utilities.every)(v => !this._forcedByPlan.has(v), c.variables())) {\n      let m = (0, _utilities.first)(c._viableMethods); // just pick the first (likely only method) for the plan\n\n      _hdconsole.hdconsole.assert(m != null, \"constraint has no viable methods\");\n\n      if (m == null) return false; // FIXME: think if asserting is the best way: could just return false?\n\n      c.selectedMethod = m;\n\n      for (let v of c.outs(m)) {\n        this._forcedByPlan.set(v, m);\n      } // Methods that have an output to a forcedByPlan variable\n      // cannot be added to the plan. But methods that have\n      // nonOutputs that are forced, could lead to a cycle.\n      // So we ban all constraints that have have variables\n      // forced by the current plan.\n      // This could be detected, but instead we just say\n      // that it is unusure if plan is possible or not.\n      // The usual case\n      // of calling this function is with stay constraints,\n      // and then cycles are not an issue.\n\n\n      return true;\n    }\n\n    return null; // don't know if c can be enforced, must do planning\n  }\n\n  *freeMethods() {\n    let seen = new Set(); // check constraint only once\n\n    for (let v of this._freeVars) {\n      for (let c of this._v2cs.values(v)) {\n        // FIXME: this loop should only happen once, because v is free.\n        // right?\n        if (!seen.has(c)) {\n          seen.add(c);\n\n          for (let m of c.viableMethods()) {\n            if ((0, _utilities.every)(v => this._freeVars.has(v), c.outs(m))) {\n              yield [c, m];\n              break; // only generate the first method per constraint\n            }\n          }\n        }\n      }\n    }\n  }\n\n  firstFreeMethod() {\n    return (0, _utilities.first)(this.freeMethods());\n  }\n\n  constraints() {\n    let cs = new Set();\n\n    for (let v of this._v2cs.keys()) {\n      for (let c of this._v2cs.values(v)) cs.add(c);\n    }\n\n    return cs;\n  }\n\n}\n\nexports.default = SimplePlanner;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UpstreamSolutionGraph = exports.DownstreamSolutionGraph = void 0;\n\nvar _constraint = _interopRequireDefault(require(\"./constraint\"));\n\nvar _variable = _interopRequireDefault(require(\"./variable\"));\n\nvar _constraintSystem = _interopRequireDefault(require(\"./constraint-system\"));\n\nvar _constraintSystemUtil = require(\"./constraint-system-util\");\n\nvar _utilities = require(\"../utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass DownstreamSolutionGraph {\n  constructor(system) {\n    this._system = system;\n  }\n\n  adjacentOutVertices(v) {\n    if ((0, _constraintSystemUtil.isConstraint)(v)) {\n      return v.downstreamAndUndetermined();\n    } else return (0, _utilities.filter)(c => c.isNonOutputVariable(v) || !c.isEnforced(), this._system._v2cs.values(v));\n  }\n\n  outDegree(v) {\n    if ((0, _constraintSystemUtil.isConstraint)(v)) {\n      return v.selectedMethod != null ? v.selectedMethod.nOuts() : 0;\n    } else {\n      return (0, _utilities.count)(this.adjacentOutVertices(v)); // not constant time\n    }\n  }\n\n}\n\nexports.DownstreamSolutionGraph = DownstreamSolutionGraph;\n\nclass UpstreamSolutionGraph {\n  constructor(system) {\n    this._system = system;\n  }\n\n  adjacentOutVertices(v) {\n    if ((0, _constraintSystemUtil.isConstraint)(v)) {\n      return v.upstreamAndUndetermined();\n    } else return (0, _utilities.filter)(c => c.isOutputVariable(v) || !c.isEnforced(), this._system._v2cs.values(v));\n  }\n\n  outDegree(v) {\n    if ((0, _constraintSystemUtil.isConstraint)(v)) {\n      return v.selectedMethod != null ? v.selectedMethod.nNonOuts() : 0;\n    } else {\n      return (0, _utilities.count)(this.adjacentOutVertices(v)); // not constant time\n    }\n  }\n\n}\n\nexports.UpstreamSolutionGraph = UpstreamSolutionGraph;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _component = _interopRequireDefault(require(\"./component\"));\n\nvar _constraintSystem = _interopRequireDefault(require(\"./constraint-system\"));\n\nvar _variable = _interopRequireDefault(require(\"./variable\"));\n\nvar _utilities = require(\"../utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass VariableReference extends _utilities.ObservableReference {\n  constructor(owner) {\n    super();\n    this._owner = owner;\n  }\n\n  get system() {\n    return this._owner.system;\n  }\n\n  get name() {\n    return this._owner.variableReferenceName(this);\n  }\n\n  isOwningReference() {\n    return this.value == null ? false : this.value._owner === this;\n  }\n\n  prettyPrint() {\n    let s = this.name;\n    if (this.value != null) s += \":\" + this.value._index;\n    return s;\n  }\n\n}\n\nexports.default = VariableReference;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _computationGraph = require(\"../computation-graph\");\n\nvar Obs = _interopRequireWildcard(require(\"../observable\"));\n\nvar _variableReference = _interopRequireDefault(require(\"./variable-reference\"));\n\nvar _constraintSystem = _interopRequireDefault(require(\"./constraint-system\"));\n\nvar _utilities = require(\"../utilities\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nlet freshIndex = (() => {\n  let ind = 0;\n  return () => ++ind;\n})();\n\nclass Variable {\n  // for debugging purposes\n  // holds observers\n  get value() {\n    return this._inError ? undefined : this._value;\n  }\n\n  get error() {\n    return this._inError ? this._error : undefined;\n  }\n\n  get stale() {\n    return !this._pending && this._inError;\n  }\n\n  get pending() {\n    return this._pending;\n  }\n\n  constructor(owner, v = undefined) {\n    this._index = freshIndex();\n    this._owner = owner;\n    this._value = undefined;\n    this._error = undefined;\n    this._inError = false;\n    this._pending = true;\n    this._subject = new Obs.Subject(o => {\n      let evt = {\n        value: this._value,\n        pending: this._pending,\n        inError: this._inError\n      };\n      if (this._inError) evt.error = this._error;\n      o.next(evt);\n    });\n    this.pushNewActivation();\n    if (v !== undefined) this._activation.resolve(v);\n  }\n\n  subscribe(o) {\n    return this._subject.subscribe(o);\n  }\n\n  subscribeValue(o) {\n    return this._subject.filter(e => e.hasOwnProperty(\"value\")).map(e => e.value).subscribe(o);\n  }\n\n  subscribePending(o) {\n    return this._subject.filter(e => e.hasOwnProperty(\"pending\")).map(e => e.pending).subscribe(o);\n  }\n\n  subscribeError(o) {\n    return this._subject.filter(e => e.hasOwnProperty(\"inError\") || e.hasOwnProperty(\"error\")).map(e => {\n      let r = {};\n      if (e.hasOwnProperty(\"error\")) r.error = e.error;\n      if (e.hasOwnProperty(\"inError\")) r.inError = e.inError;\n      return r;\n    }).subscribe(o);\n  }\n\n  pushNewActivation() {\n    let r = new _computationGraph.VariableActivation(this);\n    this._activation = r;\n\n    if (this._pending === false) {\n      this._pending = true;\n\n      this._subject.sendNext({\n        pending: true\n      });\n    }\n\n    r.promise.then(val => {\n      if (r === this._activation) {\n        // is the activation still the newest\n        this._value = val;\n        let evt = {\n          value: val\n        };\n\n        if (this._inError) {\n          this._inError = false;\n          evt.inError = false;\n        }\n\n        this._pending = false;\n        evt.pending = false;\n\n        this._subject.sendNext(evt);\n      }\n    }, e => {\n      if (r === this._activation) {\n        this._error = e;\n        let evt = {\n          error: e\n        };\n\n        if (!this._inError) {\n          this._inError = true;\n          evt.inError = true;\n        }\n\n        this._pending = false;\n        evt.pending = false;\n\n        this._subject.sendNext(evt);\n      }\n    });\n    return r;\n  }\n\n  get currentPromise() {\n    return this._activation.promise;\n  }\n\n  get owner() {\n    return this._owner;\n  }\n\n  get system() {\n    return this._owner.system;\n  }\n\n  get name() {\n    if (this._owner == null) return \"<unnamed>\";else return this._owner.name;\n  }\n\n  set(v) {\n    this.assign(v);\n    let s = this.system;\n    if (s != null) s.updateDirty();\n    return this;\n  }\n\n  fail(e) {\n    this._assign().reject(e);\n\n    let s = this.system;\n    if (s != null) s.updateDirty();\n    return this;\n  }\n\n  assign(v) {\n    this._assign().resolve(v);\n  }\n\n  _assign() {\n    let prevActivation = this._activation;\n    this.pushNewActivation();\n    let s = this.system;\n\n    if (s != null) {\n      s.promoteVariable(this);\n      let sc = s.getSourceConstraint(this);\n      if (sc != null) s.setDirty(sc);\n      s.setDirty(s.getStay(this));\n    }\n\n    (0, _utilities.release)(prevActivation);\n    return this._activation;\n  }\n\n  touch() {\n    let s = this.system;\n    if (s != null) s.promoteVariable(this);\n    return this;\n  }\n\n  _touchPlanSolve() {\n    this.touch();\n    let s = this.system;\n    let prevActivation = this._activation;\n    this.pushNewActivation();\n\n    if (s == null) {\n      (0, _utilities.release)(prevActivation);\n      return this._activation;\n    }\n\n    let pushedActivation = this._activation;\n    let sc = s.getSourceConstraint(this);\n    s.setDirty(sc != null ? sc : s.getStay(this));\n    s.updateDirty(); // solving pushes new activations to variables, also possibly to this._activation.\n    // This happens if 'this' cannot stay in the current plan.\n\n    (0, _utilities.release)(prevActivation); // return the activation that should be resolved or rejected\n\n    return pushedActivation;\n  }\n\n}\n\nexports.default = Variable;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dfsVisit = dfsVisit;\nexports.reverseTopoSort = reverseTopoSort;\nexports.reverseTopoSortFrom = reverseTopoSortFrom;\n\nvar _utilities = require(\"./utilities\");\n\n// export type { DfsAdjacencyVisitor };\nfunction dfsVisit(g, vs, visitor, visited) {\n  if (visited == null) visited = new Set();\n  let stack = [];\n  let it = (0, _utilities.iterableToIterator)(vs);\n\n  while (true) {\n    let n = it.next();\n\n    if (n.done) {\n      if (stack.length === 0) break; // returns\n\n      let v;\n      [v, it] = stack.pop();\n      visitor.finishVertex(v);\n      continue;\n    }\n\n    let v = n.value;\n\n    if (visited.has(v)) {\n      continue;\n    }\n\n    visitor.discoverVertex(v);\n    visited.add(v);\n    stack.push([v, it]);\n    it = (0, _utilities.iterableToIterator)(g.adjacentOutVertices(v));\n  }\n}\n\nfunction reverseTopoSort(g) {\n  return reverseTopoSortFrom(g, g.vertices());\n}\n\nclass TopoVisitor {\n  constructor() {\n    this.result = [];\n  }\n\n  discoverVertex(v) {}\n\n  finishVertex(v) {\n    this.result.push(v);\n  }\n\n}\n\nfunction reverseTopoSortFrom(g, vs) {\n  let vis = new TopoVisitor();\n  dfsVisit(g, vs, vis);\n  return vis.result;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hdconsole = exports.default = exports.HdError = exports.HdConsole = void 0;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * The HdConsole class replicates basic functionality of Console, and adds methods to turn logging on and off.\n */\nclass HdConsole {\n  /**\n   * @param name Name of the console\n   */\n  constructor(name) {\n    _defineProperty(this, \"error\", console.error);\n\n    _defineProperty(this, \"assert\", console.assert);\n\n    this._name = name;\n    this.on();\n  }\n\n  off() {\n    this.log = (...args) => {};\n\n    this.warn = (...args) => {};\n\n    this.error = (...args) => {};\n\n    this.assert = (_, ...args) => {};\n  }\n  /**\n   * Only log errors and asserts\n   */\n\n\n  errorsOnly() {\n    this.off();\n    this.error = console.error;\n    this.assert = console.assert;\n  }\n  /**\n   * Enable all logging\n   */\n\n\n  on() {\n    this.log = console.log;\n    this.warn = console.warn;\n    this.error = console.error;\n    this.assert = console.assert;\n  }\n\n}\n/**\n *\n * Default console used for logging by hotdrink.\n *\n * @type {HdConsole}\n */\n\n\nexports.HdConsole = HdConsole;\nconst hdconsole = new HdConsole(\"HotDrink\");\nexports.hdconsole = hdconsole;\nvar _default = {\n  hdconsole\n};\nexports.default = _default;\n\nclass HdError extends Error {\n  constructor(msg, ...params) {\n    super(msg, ...params); // Maintains proper stack trace for where our error was thrown (only available on V8)\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, HdError);\n    }\n\n    this.name = \"HdError\";\n  }\n\n}\n\nexports.HdError = HdError;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  defaultConstraintSystem: true,\n  constraintSystemInVisNodesAndEdges: true,\n  constraintSystemInVisAllNodesAndEdges: true,\n  ConstraintSystem: true,\n  Method: true,\n  component: true,\n  hdl: true,\n  hdconsole: true,\n  maskPromiseUpdate: true,\n  maskUpdate: true,\n  maskPromise: true,\n  maskNone: true,\n  MaskType: true,\n  Component: true,\n  Constraint: true,\n  ConstraintSpec: true,\n  Variable: true,\n  VariableReference: true,\n  SimplePlanner: true\n};\nObject.defineProperty(exports, \"Component\", {\n  enumerable: true,\n  get: function () {\n    return _component.default;\n  }\n});\nObject.defineProperty(exports, \"Constraint\", {\n  enumerable: true,\n  get: function () {\n    return _constraint.default;\n  }\n});\nObject.defineProperty(exports, \"ConstraintSpec\", {\n  enumerable: true,\n  get: function () {\n    return _constraintSpec.default;\n  }\n});\nObject.defineProperty(exports, \"ConstraintSystem\", {\n  enumerable: true,\n  get: function () {\n    return _constraintSystem.default;\n  }\n});\nObject.defineProperty(exports, \"MaskType\", {\n  enumerable: true,\n  get: function () {\n    return _constraintSystemUtil.MaskType;\n  }\n});\nObject.defineProperty(exports, \"Method\", {\n  enumerable: true,\n  get: function () {\n    return _method.default;\n  }\n});\nObject.defineProperty(exports, \"SimplePlanner\", {\n  enumerable: true,\n  get: function () {\n    return _simplePlanner.default;\n  }\n});\nObject.defineProperty(exports, \"Variable\", {\n  enumerable: true,\n  get: function () {\n    return _variable.default;\n  }\n});\nObject.defineProperty(exports, \"VariableReference\", {\n  enumerable: true,\n  get: function () {\n    return _variableReference.default;\n  }\n});\nObject.defineProperty(exports, \"component\", {\n  enumerable: true,\n  get: function () {\n    return _constraintBuilder.component;\n  }\n});\nexports.constraintSystemInVisAllNodesAndEdges = constraintSystemInVisAllNodesAndEdges;\nexports.constraintSystemInVisNodesAndEdges = constraintSystemInVisNodesAndEdges;\nexports.defaultConstraintSystem = void 0;\nObject.defineProperty(exports, \"hdconsole\", {\n  enumerable: true,\n  get: function () {\n    return _hdconsole.hdconsole;\n  }\n});\nObject.defineProperty(exports, \"hdl\", {\n  enumerable: true,\n  get: function () {\n    return _constraintBuilder.hdl;\n  }\n});\nObject.defineProperty(exports, \"maskNone\", {\n  enumerable: true,\n  get: function () {\n    return _constraintSystemUtil.maskNone;\n  }\n});\nObject.defineProperty(exports, \"maskPromise\", {\n  enumerable: true,\n  get: function () {\n    return _constraintSystemUtil.maskPromise;\n  }\n});\nObject.defineProperty(exports, \"maskPromiseUpdate\", {\n  enumerable: true,\n  get: function () {\n    return _constraintSystemUtil.maskPromiseUpdate;\n  }\n});\nObject.defineProperty(exports, \"maskUpdate\", {\n  enumerable: true,\n  get: function () {\n    return _constraintSystemUtil.maskUpdate;\n  }\n});\n\nvar _constraintSystem = _interopRequireDefault(require(\"./constraint-system/constraint-system\"));\n\nvar _method = _interopRequireDefault(require(\"./constraint-system/method\"));\n\nvar _constraintBuilder = require(\"./constraint-builder\");\n\nvar _hdconsole = require(\"./hdconsole\");\n\nvar _solutionGraph = require(\"./constraint-system/solution-graph\");\n\nObject.keys(_solutionGraph).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _solutionGraph[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _solutionGraph[key];\n    }\n  });\n});\n\nvar _constraintSystemUtil = require(\"./constraint-system/constraint-system-util\");\n\nObject.keys(_constraintSystemUtil).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _constraintSystemUtil[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _constraintSystemUtil[key];\n    }\n  });\n});\n\nvar _component = _interopRequireDefault(require(\"./constraint-system/component\"));\n\nvar _constraint = _interopRequireDefault(require(\"./constraint-system/constraint\"));\n\nvar _constraintSpec = _interopRequireDefault(require(\"./constraint-system/constraint-spec\"));\n\nvar _variable = _interopRequireDefault(require(\"./constraint-system/variable\"));\n\nvar _variableReference = _interopRequireDefault(require(\"./constraint-system/variable-reference\"));\n\nvar _simplePlanner = _interopRequireDefault(require(\"./constraint-system/simple-planner\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst defaultConstraintSystem = new _constraintSystem.default();\nexports.defaultConstraintSystem = defaultConstraintSystem;\n\nlet objectId = (() => {\n  let m = new WeakMap();\n  let counter = 0;\n\n  let wm = o => {\n    let id = m.get(o);\n    if (id !== undefined) return id;else {\n      let curr = counter++;\n      m.set(o, curr);\n      return curr;\n    }\n  };\n\n  return wm;\n})();\n\nfunction constraintSystemInVisNodesAndEdges(cs) {\n  let nodes = [];\n  let edges = [];\n\n  for (let v of cs.variables()) {\n    nodes.push({\n      id: objectId(v),\n      label: v.name,\n      shape: \"box\"\n    });\n  }\n\n  for (let c of cs.allConstraints()) {\n    let mcounter = 0;\n    if (!c.isEnforced()) continue;\n    let m = c.selectedMethod;\n    let id = `m#${objectId(c)}-${mcounter}`;\n    console.log(\"ID: \", id, \"C.M\", c.name + \".\" + m.name);\n    let color = \"lime\";\n    nodes.push({\n      id: id,\n      label: c.name + \".\" + m.name,\n      cid: \"C#\" + objectId(c),\n      color: color\n    });\n\n    for (let v of c.nonOuts(m)) edges.push({\n      from: objectId(v),\n      to: id,\n      arrows: \"to\",\n      dashes: true\n    });\n\n    for (let v of c.outs(m)) edges.push({\n      from: id,\n      to: objectId(v),\n      arrows: \"to\"\n    }); // FIXME: ins should be the complement of outs\n\n\n    ++mcounter;\n  }\n\n  return [nodes, edges];\n}\n\nfunction constraintSystemInVisAllNodesAndEdges(cs) {\n  let nodes = [];\n  let edges = [];\n\n  for (let v of cs.variables()) {\n    nodes.push({\n      id: objectId(v),\n      label: v.name,\n      shape: \"box\"\n    });\n  }\n\n  for (let c of cs.allConstraints()) {\n    let mcounter = 0; //if (!c.isEnforced()) continue;\n\n    for (let m of c.methods()) {\n      let id = `m#${objectId(c)}-${mcounter}`;\n      console.log(\"ID: \", id, \"C.M\", c.name + \".\" + m.name);\n      let color = \"lime\";\n      nodes.push({\n        id: id,\n        label: c.name + \".\" + m.name,\n        cid: \"C#\" + objectId(c),\n        color: color\n      });\n\n      for (let v of c.nonOuts(m)) {\n        edges.push({\n          from: objectId(v),\n          to: id,\n          arrows: \"to\",\n          dashes: true\n        });\n        console.log(\"INS: \", v.name);\n      }\n\n      for (let v of c.outs(m)) {\n        edges.push({\n          from: id,\n          to: objectId(v),\n          arrows: \"to\"\n          /*, label: \"FROM_C_\"+c.name+\"_M_\"+m.name+\"+TO_\"+v.name*/\n\n        });\n        console.log(\"OUTS: \", v.name);\n      } // FIXME: ins should be the complement of outs\n\n\n      ++mcounter;\n    }\n  }\n\n  return [nodes, edges];\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Position = void 0;\nexports.isAlpha = isAlpha;\nexports.isAlphaNum = isAlphaNum;\nexports.isAlphaPlus = isAlphaPlus;\nexports.isDigit = isDigit;\nexports.isWhitespace = isWhitespace;\n\nclass Position {\n  // 0-indexed position on the entire input string\n  // 1-indexed\n  // 0-indexed\n  // name of a source (file) the position refers to\n  constructor(pos, row, col, source) {\n    this._pos = pos;\n    this._row = row;\n    this._col = col;\n    if (source !== undefined) this._source = source;\n  }\n\n  get pos() {\n    return this._pos;\n  }\n\n  get row() {\n    return this._row;\n  }\n\n  get col() {\n    return this._col;\n  }\n\n  get source() {\n    return this._source != null ? this._source : \"-\";\n  }\n\n  toString() {\n    return this.source + \":\" + this.row + \":\" + this.col;\n  }\n\n  advance(str) {\n    for (let i = 0; i < str.length; ++i) {\n      if (str[i] === \"\\n\") {\n        this._row++;\n        this._col = 0;\n      } else {\n        this._col++;\n      }\n\n      this._pos++;\n    }\n  }\n\n  clone() {\n    let p = new Position(this.pos, this.row, this.col);\n    if (this.hasOwnProperty(\"_source\")) p._source = this._source; // optional parameters do not accept null,\n    // therefore we set _source after construction\n    // We only set it if the property exists in the source;\n    //   otherwise we might get _source to exist but be undefined in target,\n    //   and then source and target would not compare (deep)equal\n\n    return p;\n  }\n\n}\n\nexports.Position = Position;\n\nfunction isWhitespace(c) {\n  switch (c) {\n    case \" \":\n    case \"\\t\":\n    case \"\\r\":\n    case \"\\n\":\n      return true;\n\n    default:\n      return false;\n  }\n}\n\nfunction isDigit(c) {\n  return c >= \"0\" && c <= \"9\";\n}\n\nfunction isAlpha(c) {\n  return c >= \"a\" && c <= \"z\" || c >= \"A\" && c <= \"Z\";\n}\n\nfunction isAlphaPlus(c) {\n  return isAlpha(c) || c === \"_\" || c === \"$\";\n}\n\nfunction isAlphaNum(c) {\n  return isAlphaPlus(c) || isDigit(c);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SubscriptionObserver = exports.Subject = exports.ReplaySubject = exports.Observable = exports.HdSubscription = exports.BehaviorSubject = void 0;\nexports.mkObserver = mkObserver;\n\n// create an observer from separate functions\nfunction mkObserver(obs, err, complete) {\n  if (typeof obs === \"function\") {\n    let observer = {};\n    observer.next = obs;\n    if (err != null) observer.error = err;\n    if (complete != null) observer.complete = complete;\n    return observer;\n  } else {\n    return obs;\n  }\n}\n\nclass Observable {\n  constructor(subscriber) {\n    this._subscriber = subscriber;\n  }\n\n  subscribe(obs, err, complete) {\n    let observer = mkObserver(obs, err, complete);\n    let subscription = new HdSubscription(observer);\n\n    try {\n      if (observer.start != null) observer.start(subscription);\n    } catch (e) {// FIXME: HostReportError(e)\n    }\n\n    if (subscription.closed) return subscription;\n    let subscriptionObserver = new SubscriptionObserver(subscription);\n\n    try {\n      let cleanup = this._subscriber(subscriptionObserver);\n\n      if (typeof cleanup === \"object\") cleanup = () => cleanup.unsubscribe(); // must be a Subscription object\n\n      subscription._cleanup = cleanup;\n    } catch (e) {\n      subscriptionObserver.error(e);\n    }\n\n    if (subscription.closed) subscription.cleanup();\n    return subscription;\n  } // FIXME Implement later\n  // [Symbol.observable]() : Observable;\n\n\n  static of(...items) {\n    return new Observable(observer => {\n      for (let item of items) {\n        observer.next(item);\n        if (observer.closed) return;\n      }\n\n      observer.complete();\n    });\n  } // FIXME Implement later\n  // static from(obs: Observable<T> | Iterable<T>) : Observable<T> {\n  //\n  // }\n\n\n  filter(p) {\n    return new Observable(observer => {\n      let o = mkObserver(observer);\n      if (o.next == null) o = {\n        next: e => {}\n      };\n      let s = this.subscribe(e => {\n        if (p(e) == true) o.next(e);\n      });\n      return s;\n    });\n  }\n\n  map(f) {\n    return new Observable(observer => {\n      let o = mkObserver(observer);\n      if (o.next == null) o = {\n        next: e => {}\n      };\n      let s = this.subscribe(e => {\n        let o = mkObserver(observer);\n        o.next(f(e));\n      });\n      return s;\n    });\n  }\n\n}\n\nexports.Observable = Observable;\n\nclass HdSubscription {\n  constructor(observer) {\n    this._observer = observer;\n    this._cleanup = undefined;\n  }\n\n  unsubscribe() {\n    this._observer = undefined;\n    this.cleanup();\n  }\n\n  get closed() {\n    return this._observer === undefined;\n  }\n\n  cleanup() {\n    const cUp = this._cleanup;\n    if (cUp === undefined) return;\n    this._cleanup = undefined;\n\n    try {\n      cUp();\n    } catch (e) {\n      /* FIXME: HostReportErrors(e) */\n    }\n  }\n\n}\n\nexports.HdSubscription = HdSubscription;\n\nclass SubscriptionObserver {\n  constructor(s) {\n    this._subscription = s;\n  }\n\n  get closed() {\n    return this._subscription.closed;\n  }\n\n  next(value) {\n    let s = this._subscription; // appeasing flowtype\n\n    if (s.closed) return;\n\n    if (s._observer.next != null) {\n      try {\n        s._observer.next(value);\n      } catch (e) {\n        /* FIXME: HostReportErrors(e) */\n      }\n    }\n  }\n\n  error(errorValue) {\n    let s = this._subscription; // appeasing flowtype\n\n    if (s.closed) return; // FIXME, why not test this.closed ?\n\n    if (s._observer.error != null) {\n      try {\n        s._observer.error(errorValue);\n      } catch (e) {\n        /* FIXME: HostReportErrors(e) */\n      }\n    }\n\n    this._subscription.cleanup();\n  }\n\n  complete() {\n    let s = this._subscription; // appeasing flowtype\n\n    if (s.closed) return;\n\n    if (s._observer.complete != null) {\n      try {\n        s._observer.complete();\n      } catch (e) {\n        /* FIXME: HostReportErrors(e) */\n      }\n    }\n\n    this._subscription.cleanup();\n  }\n\n}\n\nexports.SubscriptionObserver = SubscriptionObserver;\n\nclass Subject extends Observable {\n  constructor(f = o => {}) {\n    let state = {\n      observers: new Set(),\n      done: false\n    };\n    super(o => {\n      if (!state.done) state.observers.add(o);\n      f(o);\n      return () => state.observers.delete(o); // this is a no-op if done==true\n    });\n    this._subjectState = state;\n  }\n\n  sendNext(v) {\n    if (this._subjectState.done) return;\n\n    for (const obs of this._subjectState.observers) obs.next(v);\n  }\n\n  sendError(e) {\n    if (this._subjectState.done) return;\n    this._subjectState.done = true;\n\n    for (const obs of this._subjectState.observers) obs.error(e);\n  }\n\n  sendComplete() {\n    if (this._subjectState.done) return;\n    this._subjectState.done = true;\n\n    for (const obs of this._subjectState.observers) obs.complete();\n  }\n\n  get nObservers() {\n    return this._subjectState.observers.size;\n  }\n\n}\n\nexports.Subject = Subject;\n\nclass ReplaySubject extends Subject {\n  constructor(limit = 1) {\n    let state = {\n      past: [],\n      pastLimit: limit,\n      isCompleted: false,\n      isError: false\n    };\n    super(o => {\n      for (let v of state.past) o.next(v);\n\n      if (state.isError) o.error(state.error);else if (state.isCompleted) o.complete();\n    });\n    this._replaySubjectState = state;\n  }\n\n  sendNext(v) {\n    this._replaySubjectState.past.push(v);\n\n    if (this._replaySubjectState.past.length > this._replaySubjectState.pastLimit) {\n      this._replaySubjectState.past.shift();\n    }\n\n    super.sendNext(v);\n  }\n\n  sendError(e) {\n    this._replaySubjectState.isError = true;\n    this._replaySubjectState.error = e;\n    super.sendError(e);\n  }\n\n  sendComplete() {\n    this._replaySubjectState.isCompleted = true;\n    super.sendComplete();\n  }\n\n}\n\nexports.ReplaySubject = ReplaySubject;\n\nclass BehaviorSubject extends ReplaySubject {\n  constructor(v) {\n    super(1);\n\n    this._replaySubjectState.past.push(v);\n  }\n\n}\n\nexports.BehaviorSubject = BehaviorSubject;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.blockComment = exports.alphaPlus = exports.alphaNum = exports.ParseState = exports.ParseError = void 0;\nexports.context = context;\nexports.digit = exports.currentPos = void 0;\nexports.eof = eof;\nexports.exactString = exactString;\nexports.fail = fail;\nexports.failF = failF;\nexports.failure = failure;\nexports.go = go;\nexports.hdl = hdl;\nexports.identifier = identifier;\nexports.ignore = ignore;\nexports.inBetween = inBetween;\nexports.item = item;\nexports.keyword = keyword;\nexports.lift = lift;\nexports.lift2 = lift2;\nexports.lift3 = lift3;\nexports.lift4 = lift4;\nexports.lift5 = lift5;\nexports.lineComment = void 0;\nexports.many = many;\nexports.many1 = many1;\nexports.manyws = void 0;\nexports.mkParseState = mkParseState;\nexports.must = must;\nexports.named = named;\nexports.nat = void 0;\nexports.notFollowedBy = notFollowedBy;\nexports.ok = ok;\nexports.oneOf = oneOf;\nexports.onews = void 0;\nexports.opt = opt;\nexports.pBind = pBind;\nexports.pBind_ = pBind_;\nexports.pChar = pChar;\nexports.pChars = pChars;\nexports.pNot = pNot;\nexports.pSplice = void 0;\nexports.pTry = pTry;\nexports.parens = parens;\nexports.peekItem = peekItem;\nexports.ret = ret;\nexports.sat = sat;\nexports.sepList = sepList;\nexports.token = token;\nexports.until = until;\nexports.word = word;\n\nvar lex = _interopRequireWildcard(require(\"./lexing-tools\"));\n\nvar _peekIterator = _interopRequireDefault(require(\"./peek-iterator\"));\n\nvar _utilities = require(\"./utilities\");\n\nvar _hdconsole = require(\"./hdconsole\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nclass ParseState {\n  constructor(input, splices = [], pos = new lex.Position(0, 1, 0)) {\n    this._input = new _peekIterator.default(input);\n    this._context = [];\n    this._splices = splices;\n    this.pos = pos;\n  }\n\n  pushContext(str) {\n    this._context.push([str, this.pos.clone()]);\n  }\n\n  popContext() {\n    this._context.pop();\n  }\n\n  checkpoint() {\n    this._input.checkpoint(this.pos.clone());\n  }\n\n  forgetCheckpoint() {\n    this._input.forgetCheckpoint();\n  }\n\n  resetCheckpoint() {\n    this.pos = this._input.reset();\n  }\n\n  peek() {\n    return this._input.peek();\n  }\n\n  advance() {\n    let i = this._input.next();\n\n    if (!i.done) this.pos.advance(i.value);\n    return i.value;\n  }\n\n  getSplice(i) {\n    return this._splices[i];\n  }\n\n  parseErrorF(expF, msg) {\n    // extract the topmost context, if any\n    let ctxName, ctxPos;\n    if (this._context.length > 0) [ctxName, ctxPos] = this._context[this._context.length - 1];\n    this.checkpoint();\n    let r = lift((spc, nonspc) => spc + nonspc.join(\"\"), manyws, many(sat(c => !lex.isWhitespace(c), \"\")))(this);\n    this.resetCheckpoint();\n    let unexpected = \"<?>\";\n    if (r.success) unexpected = r.value;\n    return new ParseError(this.pos.clone(), expF, unexpected, ctxName, ctxPos, msg);\n  }\n\n  parseError(exp, msg) {\n    return this.parseErrorF(() => exp, msg);\n  }\n\n}\n\nexports.ParseState = ParseState;\n\nfunction mkParseState(s, splices = []) {\n  // $FlowFixMe\n  return new ParseState(s[Symbol.iterator](), splices);\n}\n\nfunction ok(t, c = true) {\n  return {\n    success: true,\n    value: t,\n    consumed: c\n  };\n}\n\nfunction fail(es, c = false) {\n  return failF(() => es, c);\n}\n\nfunction failF(ef, c = false) {\n  return {\n    success: false,\n    expecting: ef,\n    consumed: c\n  };\n}\n\nclass ParseError extends Error {\n  constructor(pos, expF, unexp, ctxName, ctxPos, msg) {\n    super();\n    this._pos = pos;\n    this._expecting = expF;\n    this._unexpected = unexp;\n    this._ctxName = ctxName;\n    this._ctxPos = ctxPos;\n    this._msg = msg;\n  }\n\n  get name() {\n    return \"HotDrink Parse Error\";\n  }\n\n  set name(s) {\n    throw Error(\"Cannot set the name of ParseError\");\n  }\n\n  get message() {\n    let msg = this._pos.toString() + \"\\n\";\n    if (this._msg != null) msg += this._msg + \"\\n\";\n\n    let e = this._formatExpecting();\n\n    let u = this._unexpected != null ? this._unexpected : \"<eof>\";\n    if (e !== \"\") msg += \"Expecting \" + e + \". \";\n    msg += \"Unexpected \" + u + \"\\n\";\n\n    if (this._ctxName != null && this._ctxPos != null) {\n      msg += \"\\n\" + \"  while parsing \" + this._ctxName + \" (\" + this._ctxPos.toString() + \")\\n\";\n    }\n\n    return msg;\n  }\n\n  set message(s) {\n    throw Error(\"Cannot set the message of ParseError\");\n  }\n\n  _formatExpecting() {\n    let es = this._expecting();\n\n    if (es.length == 1) return es[0];\n    if (es.length > 1) return \"one of (\" + es.join(\", \") + \")\";\n    return \"\";\n  }\n\n}\n\nexports.ParseError = ParseError;\n\nfunction item(ps) {\n  let v = ps.advance();\n  if (v == null) return fail([\"<item>\"]);else return ok(v);\n}\n\nfunction peekItem(ps) {\n  let v = ps.peek();\n  if (v == null) return fail([\"<peek-item>\"]);else return ok(v, false);\n}\n\nfunction failure(ps) {\n  return fail([]);\n}\n\nfunction ret(v, consumed = false) {\n  return ps => ok(v, consumed);\n}\n\nfunction eof(ps) {\n  return peekItem(ps).success ? fail([\"<eof>\"]) : ok(null, false);\n}\n\nfunction sat(predicate, name = \"<sat: ?>\") {\n  let f = ps => {\n    let r = peekItem(ps);\n    if (r.success && predicate(r.value)) return item(ps);else return fail([name]);\n  };\n\n  f.parserName = name;\n  return f;\n}\n\nfunction pChar(c) {\n  return sat(x => x === c, c);\n}\n\nfunction pChars(cs) {\n  return sat(x => (0, _utilities.some)(v => v === x, cs), `<any of '${cs}'>`);\n}\n\nconst alphaPlus = sat(lex.isAlphaPlus, \"<letter>\");\nexports.alphaPlus = alphaPlus;\nconst alphaNum = sat(lex.isAlphaNum, \"<letter or digit>\");\nexports.alphaNum = alphaNum;\nconst digit = sat(lex.isDigit, \"<digit>\");\nexports.digit = digit;\n\nfunction many(p) {\n  return oneOf(many1(p), ret([]));\n}\n\nfunction many1(p) {\n  return ps => {\n    return lift((v, vs) => {\n      vs.unshift(v);\n      return vs;\n    }, p, many(p))(ps);\n  };\n}\n\nfunction exactString(s) {\n  let result = ps => {\n    ps.checkpoint();\n\n    for (let c of s) {\n      let r = item(ps);\n\n      if (r.success && r.value != c || !r.success) {\n        ps.resetCheckpoint();\n        return fail([s]);\n      }\n    }\n\n    ps.forgetCheckpoint();\n    return ok(s, s.length > 0); // consumes if nonzero length\n  };\n\n  result.parserName = s;\n  return result;\n}\n\nconst lineComment = lift((pre, rest, nl) => pre + rest.join(\"\") + nl, exactString(\"//\"), many(sat(t => t !== \"\\n\")), // fails at '\\n' and also at <eof>\noneOf(pChar(\"\\n\"), pBind_(eof, ret(\"\"))));\nexports.lineComment = lineComment;\nconst blockComment = lift((pre, rest, post) => pre + rest.join(\"\") + post, exactString(\"/*\"), many(pBind_(pNot(exactString(\"*/\")), item)), oneOf(exactString(\"*/\"), pBind_(eof, ret(\"\"))));\nexports.blockComment = blockComment;\nconst onews = sat(lex.isWhitespace, \"<whitespace>\");\nexports.onews = onews;\nconst manyws = lift(a => a.join(\"\"), many(oneOf(onews, lineComment, blockComment)));\nexports.manyws = manyws;\n\nfunction pBind(p, f) {\n  return ps => {\n    const r1 = p(ps);\n    if (!r1.success) return r1; // p failed, hence fail\n\n    let r2 = f(r1.value)(ps);\n    if (!r2.consumed) r2.consumed = r1.consumed; // consumed is true if either consumed\n\n    return r2;\n  };\n}\n\nfunction pBind_(p, q) {\n  return pBind(p, _ => q);\n}\n\nfunction opt(p, v) {\n  return ps => {\n    ps.checkpoint();\n    let r = p(ps);\n\n    if (r.success) {\n      ps.forgetCheckpoint();\n      return ok(r.value, r.consumed);\n    } else {\n      ps.resetCheckpoint();\n      return ok(v, false);\n    }\n  };\n}\n\nconst _ignoreTag = {};\n\nfunction ignore(p) {\n  return lift(() => _ignoreTag, p);\n}\n\nfunction lift(f, ...parsers) {\n  return ps => {\n    let rs = [];\n    let consumed = false;\n\n    for (let p of parsers) {\n      let r = p(ps);\n      r.consumed = r.consumed || consumed;\n      consumed = r.consumed;\n      if (!r.success) return r;\n      if (r.value !== _ignoreTag) rs.push(r.value);\n    }\n\n    return ok(f(...rs));\n  };\n}\n\nfunction lift2(f) {\n  return (p1, p2) => lift(f, p1, p2);\n}\n\nfunction lift3(f) {\n  return (p1, p2, p3) => lift(f, p1, p2, p3);\n}\n\nfunction lift4(f) {\n  return (p1, p2, p3, p4) => lift(f, p1, p2, p3, p4);\n}\n\nfunction lift5(f) {\n  return (p1, p2, p3, p4, p5) => lift(f, p1, p2, p3, p4, p5);\n}\n\nfunction go(pg) {\n  return function (ps) {\n    let consumed = false;\n    let pr = pg.next();\n\n    while (!pr.done) {\n      let r = pr.value(ps);\n      r.consumed = r.consumed || consumed;\n      consumed = r.consumed;\n      if (!r.success) return r;\n      pr = pg.next(r.value);\n    }\n\n    if (pr.value === undefined) {\n      // if this happens, the generator is faulty\n      _hdconsole.hdconsole.assert(false, \"Incorrect yield parser\");\n\n      return fail([\"<?>\"], consumed);\n    } else return ok(pr.value, consumed);\n  };\n}\n\nfunction inBetween(p, open, close) {\n  return go(function* () {\n    yield open;\n    const v = yield p;\n    yield close;\n    return v;\n  }());\n}\n\nfunction parens(p) {\n  return inBetween(p, word(\"(\"), word(\")\"));\n}\n\nfunction oneOf(...qs) {\n  return ps => {\n    let es = [];\n\n    for (let q of qs) {\n      let r = q(ps);\n      if (r.success || r.consumed) return r;else es.push(r.expecting);\n    } // all failed without consuming, concatenate expecting info\n\n\n    return failF(() => Array.prototype.concat(...es.map(f => f()))); // one level flatten (Array.flat() not yet in many browsers)\n    // FIXME: remove duplicates\n  };\n}\n\nfunction pNot(p) {\n  return ps => {\n    ps.checkpoint();\n    let r = p(ps);\n\n    if (!r.success && !r.consumed) {\n      ps.resetCheckpoint();\n      return ok(null, false);\n    }\n\n    let consumed = r.consumed;\n\n    if (r.success) {\n      ps.resetCheckpoint();\n      consumed = false;\n    } else {\n      ps.forgetCheckpoint();\n    }\n\n    return fail([\"not(\" + p.parserName + \")\"], consumed);\n  };\n}\n\nfunction until(p) {\n  return lift(ls => ls.join(\"\"), many(pBind_(pNot(p), item)));\n}\n\nfunction notFollowedBy(q1, q2) {\n  return ps => {\n    ps.checkpoint();\n    let r1 = q1(ps);\n\n    if (!r1.success) {\n      ps.forgetCheckpoint();\n      return r1;\n    }\n\n    let r2 = pNot(q2)(ps);\n\n    if (r2.success) {\n      ps.forgetCheckpoint();\n      return r1;\n    }\n\n    if (r2.consumed) {\n      ps.forgetCheckpoint();\n      return r2;\n    } else {\n      ps.resetCheckpoint();\n      return fail([q1.parserName + \" not followed by \" + q2.parserName]);\n    }\n  };\n}\n\nfunction pTry(q) {\n  return ps => {\n    ps.checkpoint();\n    let r = q(ps);\n\n    if (r.success) {\n      ps.forgetCheckpoint();\n      return r;\n    }\n\n    ps.resetCheckpoint();\n    return fail([q.parserName]);\n  };\n}\n\nfunction must(p, msg) {\n  return ps => {\n    let r = p(ps);\n    if (r.success) return r;else throw ps.parseErrorF(r.expecting, msg);\n  };\n}\n\nfunction named(p, name = \"<?>\") {\n  let q = ps => {\n    let r = p(ps);\n    if (!r.success) r.expecting = () => [name];\n    return r;\n  };\n\n  q.parserName = name;\n  return q;\n}\n\nfunction token(q) {\n  return lift((v, _) => v, q, manyws);\n}\n\nfunction word(s) {\n  return token(exactString(s));\n}\n\nfunction keyword(s) {\n  return named(token(notFollowedBy(exactString(s), named(alphaNum, \"<alphanum>\"))), `<keyword: ${s}>`);\n}\n\nfunction identifier(ps) {\n  return lift((h, t, _) => h + t.join(\"\"), sat(lex.isAlphaPlus, \"<identifier>\"), many(sat(lex.isAlphaNum)), manyws)(ps);\n}\n\nlet nat = lift(ds => Number(ds.join(\"\")), named(token(notFollowedBy(named(many1(digit), \"<nat>\"), named(alphaPlus, \"<alphaplus>\"))), \"<nat>\"));\nexports.nat = nat;\n\nfunction sepList(element, sep) {\n  return ps => {\n    let r = element(ps);\n    if (!r.success) return r.consumed ? r : ok([], false); // if element parser consumed and failed, then fail\n\n    let rs = many(pBind_(sep, element))(ps);\n    rs.consumed = r.consumed || rs.consumed;\n    if (rs.success) rs.value.unshift(r.value);\n    return rs;\n  };\n}\n\nconst currentPos = ps => ok(ps.pos.clone(), false);\n\nexports.currentPos = currentPos;\n\nfunction context(str, p) {\n  return ps => {\n    ps.pushContext(str);\n\n    try {\n      return p(ps);\n    } finally {\n      ps.popContext();\n    }\n  };\n}\n\nfunction hdl(strs, ...splices) {\n  let pstr = \"\";\n\n  for (let i = 0; i < splices.length; ++i) {\n    pstr += strs[i];\n    pstr += \"###\" + i + \"###\";\n  }\n\n  if (strs.length > 0) pstr += strs[strs.length - 1];\n  let ps = mkParseState(pstr, splices);\n  return ps;\n}\n\nconst pSplice = ps => pBind(inBetween(nat, exactString(\"###\"), word(\"###\")), key => ret(ps.getSplice(key)))(ps);\n\nexports.pSplice = pSplice;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nclass PeekIterator {\n  constructor(iter) {\n    this._iter = iter;\n    this._currentIndex = 0;\n    this._firstIndex = 0;\n    this._buffer = [];\n    this._checkpoints = [];\n  }\n\n  next() {\n    if (this._fetch(1) === 0) return {\n      done: true\n    };\n    let r = {\n      value: this._at(this._currentIndex++),\n      done: false\n    };\n\n    this._collect();\n\n    return r;\n  }\n\n  _ind2buf(i) {\n    return i - this._firstIndex;\n  }\n\n  _at(i) {\n    return this._buffer[this._ind2buf(i)];\n  }\n\n  _fetch(n) {\n    let currentlyRead = this._buffer.length - this._ind2buf(this._currentIndex);\n\n    let toRead = n - currentlyRead;\n\n    while (toRead > 0) {\n      let v = this._iter.next();\n\n      if (v.done) break;\n      toRead--;\n\n      this._buffer.push(v.value);\n    }\n\n    return n - toRead;\n  }\n\n  _collect() {\n    let toRemove = this._checkpoints.length === 0 ? this._currentIndex - this._firstIndex : this._checkpoints[0].index - this._firstIndex;\n    this._firstIndex += toRemove;\n\n    this._buffer.splice(0, toRemove);\n  }\n\n  checkpoint(d) {\n    this._checkpoints.push({\n      index: this._currentIndex,\n      value: d\n    });\n  }\n\n  forgetCheckpoint() {\n    if (this._checkpoints.pop() === undefined) {\n      throw \"Trying to forget a nonexisting checkpoint in PeekIterator\";\n    }\n\n    this._collect();\n  }\n\n  reset() {\n    if (this._checkpoints.length === 0) {\n      throw \"Trying to reset to a nonexisting checkpoint in PeekIterator\";\n    }\n\n    let r = this._checkpoints.pop();\n\n    this._currentIndex = r.index;\n\n    this._collect();\n\n    return r.value;\n  }\n\n  peek() {\n    this._fetch(1);\n\n    return this._at(this._currentIndex);\n  }\n\n  peekMany(n) {\n    this._fetch(n);\n\n    return this._buffer.slice(this._ind2buf(this._currentIndex), this._ind2buf(this._currentIndex + n));\n  }\n\n}\n\nexports.default = PeekIterator;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RefListNode = exports.RefList = exports.PriorityList = exports.OneToManyMap = exports.ObservableReference = exports.ListNode = exports.LinkedList = exports.BinaryHeap = void 0;\nexports.adjacentFind = adjacentFind;\nexports.bisame = bisame;\nexports.bisimilar = bisimilar;\nexports.copy = copy;\nexports.count = count;\nexports.equals = equals;\nexports.every = every;\nexports.every2 = every2;\nexports.filter = filter;\nexports.first = first;\nexports.firstKeepOpen = firstKeepOpen;\nexports.foldl = foldl;\nexports.forEach = forEach;\nexports.isSortedBy = isSortedBy;\nexports.isUnique = isUnique;\nexports.iterableToIterator = iterableToIterator;\nexports.iteratorToIterable = iteratorToIterable;\nexports.join = join;\nexports.map = map;\nexports.mapEquals = mapEquals;\nexports.mkEmptyIterable = mkEmptyIterable;\nexports.mkEmptyIterator = mkEmptyIterator;\nexports.mkRefCounted = mkRefCounted;\nexports.mkSingletonIterable = mkSingletonIterable;\nexports.modifyMapValue = modifyMapValue;\nexports.nonnull_cast = nonnull_cast;\nexports.orderedMapEquals = orderedMapEquals;\nexports.orderedSetEquals = orderedSetEquals;\nexports.refCount = refCount;\nexports.release = release;\nexports.rest = rest;\nexports.retain = retain;\nexports.sameElements = sameElements;\nexports.setDifference = setDifference;\nexports.setDifferenceTo = setDifferenceTo;\nexports.setEquals = setEquals;\nexports.setUnion = setUnion;\nexports.setUnionTo = setUnionTo;\nexports.setUnionToWithDiff = setUnionToWithDiff;\nexports.setUniqueHandler = setUniqueHandler;\nexports.some = some;\nexports.subsetOf = subsetOf;\nexports.throw_on_null = throw_on_null;\nexports.until = until;\nexports.zip = zip;\nexports.zipWith = zipWith;\n\nvar _hdconsole = require(\"./hdconsole.js\");\n\nvar Obs = _interopRequireWildcard(require(\"./observable.js\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction equals(a, b) {\n  a = a;\n  b = b;\n  if (a === b) return true;\n\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) return false;\n\n    for (let i = 0; i < a.length; ++i) if (!equals(a[i], b[i])) return false;\n\n    return true;\n  }\n\n  if (a instanceof Set && b instanceof Set) return orderedSetEquals(a, b); // Equality of keys is by ===, not by equals\n\n  if (a instanceof Map && b instanceof Map) return orderedMapEquals(a, b);\n\n  if (typeof a === \"object\" && a !== null) {\n    // for any other kind of object (even function object)\n    // find .equals method if one exists\n    if (typeof a.equals === \"function\") return a.equals(b);else if (b != null) {\n      // otherwise recurse through all members\n      let ak = Object.keys(a),\n          bk = Object.keys(b);\n      if (ak.length !== bk.length) return false;\n\n      for (let m of ak) if (!equals(a[m], b[m])) return false;\n\n      return true;\n    }\n  }\n\n  if (typeof a === \"function\" && typeof a.equals === \"function\") return a.equals(b); // by default functions are the same only if === says so; but if a function object has\n  // the equals member, then that member determines equality\n\n  return false;\n} // two ordered Sets are equal if they have the same keys in the same order\n\n\nfunction orderedSetEquals(s1, s2) {\n  if (s1.size !== s2.size) return false;\n  return bisame(s1, s2);\n} // two ordered Maps are equal if they have the same keys, in the same\n// order, and for each key, values are equal\n\n\nfunction orderedMapEquals(s1, s2) {\n  if (s1.size !== s2.size) return false;\n  return every2(([key1, value1], [key2, value2]) => key1 === key2 && equals(value1, value2), s1, s2);\n} // two Sets are `set equal' if they have the same keys\n\n\nfunction setEquals(s1, s2) {\n  if (s1.size !== s2.size) return false;\n\n  for (let k of s1.keys()) if (!s2.has(k)) return false;\n\n  return true;\n} // two Maps are `set equal' if they have the same keys and for each key, values are equal\n\n\nfunction mapEquals(s1, s2) {\n  if (s1.size !== s2.size) return false;\n\n  for (let [k, v] of s1) {\n    if (!equals(s2.get(k), v)) return false;\n  }\n\n  return true;\n}\n\nfunction copy(a) {\n  return _copy(a);\n}\n\nfunction _copy(a) {\n  if (Array.isArray(a)) return a.map(v => copy(v));\n  if (a instanceof Set) return new Set(a);\n  if (a instanceof Map) return new Map(map(([k, v]) => [k, copy(v)], a));\n\n  if (typeof a === \"object\" && a !== null) {\n    if (typeof a.copy === \"function\") return a.copy();else {\n      let b = Object.create(Object.getPrototypeOf(a));\n\n      for (let m of Object.keys(a)) b[m] = copy(a[m]);\n\n      return b;\n    }\n  }\n\n  if (typeof a === \"function\" && typeof a.copy === \"function\") return a.copy(); // here should be a value, or something that is shared by reference\n\n  return a;\n}\n\nfunction subsetOf(sub, sup) {\n  for (let k of sub.keys()) if (!sup.has(k)) return false;\n\n  return true;\n}\n\nfunction modifyMapValue(m, k, fn) {\n  let newv = fn(m.get(k));\n  m.set(k, newv);\n  return newv;\n}\n\nfunction setUnion(s1, s2) {\n  let s = new Set();\n  setUnionTo(s, s1);\n  setUnionTo(s, s2);\n  return s;\n}\n\nfunction setUnionTo(s1, s2) {\n  for (let v of s2) s1.add(v);\n}\n\nfunction setUnionToWithDiff(s1, s2) {\n  let diff = new Set();\n\n  for (let v of s2) if (!s1.has(v)) {\n    s1.add(v);\n    diff.add(v);\n  }\n\n  return diff;\n}\n\nfunction setDifference(s1, s2) {\n  let s = new Set();\n\n  for (let v of s1) if (!s2.has(v)) s.add(v);\n\n  return s;\n}\n\nfunction setDifferenceTo(s1, s2) {\n  for (let v of s2) s1.delete(v);\n}\n\nfunction* mkEmptyIterable() {}\n\nfunction* mkSingletonIterable(v) {\n  yield v;\n}\n\nfunction mkEmptyIterator() {\n  // flowtype wants iterators to have @@iterator, which is an iterable's method,\n  // and does not need to be in iterator. To appease flowtype,\n  // we define a dummy in flowtype-comments\n  return {\n    /*:: @@iterator(): Iterator<T> { return ({}: any); }, */\n    // $FlowFixMe: computed property\n    next: () => ({\n      done: true,\n      value: undefined\n    })\n  };\n}\n\nfunction iteratorToIterable(it) {\n  let v = {};\n\n  v[Symbol.iterator] = function () {\n    return it;\n  };\n\n  return v; //    return ({ [Symbol.iterator]: () => it }: any);\n}\n\nfunction iterableToIterator(it) {\n  return it[Symbol.iterator]();\n}\n\nfunction map(fn, iterable) {\n  return {\n    [Symbol.iterator]: () => {\n      const iterator = iterable[Symbol.iterator]();\n      let mapIterator = {};\n\n      mapIterator.next = () => {\n        const {\n          done,\n          value\n        } = iterator.next();\n        return {\n          done,\n          value: done ? undefined : fn(value)\n        };\n      };\n\n      if (typeof iterator.return === \"function\") {\n        mapIterator.return = v => {\n          return iterator.return(v);\n        };\n      }\n\n      if (typeof iterator.throw === \"function\") {\n        mapIterator.throw = e => {\n          return iterator.throw(e);\n        }; // assuming that if .throw throws, iterator relases resources, sets itself closed etc.\n\n      }\n\n      return mapIterator;\n    }\n  };\n}\n\nfunction filter(fn, iterable) {\n  return {\n    [Symbol.iterator]: () => {\n      const iterator = iterable[Symbol.iterator]();\n      let filterIterator = {};\n\n      filterIterator.next = () => {\n        let done = false;\n        let value = undefined;\n\n        do {\n          ({\n            done,\n            value\n          } = iterator.next());\n        } while (!done && !fn(value));\n\n        return {\n          done,\n          value\n        };\n      };\n\n      if (typeof iterator.return === \"function\") {\n        filterIterator.return = v => {\n          return iterator.return(v);\n        };\n      }\n\n      if (typeof iterator.throw === \"function\") {\n        filterIterator.throw = e => {\n          return iterator.throw(e);\n        }; // assuming that if .throw throws, iterator relases resources, sets itself closed etc.\n\n      }\n\n      return filterIterator;\n    }\n  };\n}\n\nfunction until(fn, iterable) {\n  return {\n    [Symbol.iterator]: () => {\n      const iterator = iterable[Symbol.iterator]();\n      let untilIterator = {};\n\n      let step = () => iterator.next();\n\n      untilIterator.done = false;\n\n      untilIterator.next = () => {\n        if (untilIterator.done) return {\n          done: true\n        };\n        let {\n          done,\n          value\n        } = step();\n\n        step = () => iterator.next();\n\n        if (done) {\n          // normal closing of iterator: assuming it releases resources\n          untilIterator.done = true;\n          return {\n            done: true\n          };\n        }\n\n        done = fn(value);\n\n        if (done) {\n          if (typeof iterator.return === \"function\") iterator.return(); // call return to release resources\n\n          return {\n            done: true\n          };\n        } else {\n          return {\n            done: false,\n            value: value\n          };\n        }\n      };\n\n      if (typeof iterator.return === \"function\") {\n        untilIterator.return = v => {\n          return iterator.return(v);\n        };\n      }\n\n      if (typeof iterator.throw === \"function\") {\n        untilIterator.throw = e => {\n          step = () => iterator.throw(e);\n\n          return untilIterator.next(); // we do not catch exceptions and call iterator.return; assuming that\n          // if iterator.throw throws, iterator releases resources\n        };\n      }\n\n      return untilIterator;\n    }\n  };\n}\n\nfunction every(fn, iterable) {\n  for (let i of iterable) if (!fn(i)) return false;\n\n  return true;\n}\n\nfunction some(fn, iterable) {\n  for (let i of iterable) if (fn(i)) return true;\n\n  return false;\n}\n\nfunction forEach(fn, iterable) {\n  for (let i of iterable) fn(i);\n\n  return fn;\n}\n\nfunction adjacentFind(cmp, iterable) {\n  let iter = iterableToIterator(iterable);\n  let r = iter.next();\n  if (r.done) return null;\n  let prevVal = r.value;\n\n  while (true) {\n    let curr = iter.next();\n    if (curr.done) return null;\n\n    if (cmp(prevVal, curr.value)) {\n      if (typeof iter.return === \"function\") iter.return(); // release resources\n      // FIXME: how to convince flowtype that return may exist?\n\n      return [prevVal, curr.value];\n    } else {\n      prevVal = curr.value;\n    }\n  }\n}\n\nfunction isSortedBy(cmp, iterable) {\n  return adjacentFind((a, b) => !cmp(a, b), iterable) === null;\n}\n\nfunction count(iterable) {\n  let i = 0;\n\n  for (let _ of iterable) ++i;\n\n  return i;\n}\n\nfunction first(iterable) {\n  const iterator = iterable[Symbol.iterator]();\n  let r = iterator.next();\n  if (r.done) return undefined;else {\n    if (typeof iterator.return === \"function\") iterator.return();\n    return r.value;\n  }\n}\n\nfunction firstKeepOpen(iterable) {\n  let r = iterable[Symbol.iterator]().next();\n  if (r.done) return undefined;else return r.value;\n}\n\nfunction rest(iterable) {\n  let iterator = iterableToIterator(iterable);\n  iterator.next();\n  return iteratorToIterable(iterator);\n}\n\nfunction foldl(fn, u, iterable) {\n  let acc = u;\n\n  for (let t of iterable) acc = fn(t, acc);\n\n  return acc;\n}\n\nfunction join(it1) {\n  return {\n    [Symbol.iterator]: () => {\n      let outerIt = iterableToIterator(it1);\n      let innerIt;\n      let innerDone = true;\n      let allDone = false; // FIXME can one call next repeatedly after past the end?\n\n      return {\n        next: () => {\n          if (allDone) return {\n            done: true\n          }; //            let a: { value: Iterable<T>, done: false } | { done: true };\n          //            let b: { value: T, done: false } | { done: true };\n\n          let a;\n          let b;\n\n          while (true) {\n            if (innerDone == true) {\n              a = outerIt.next();\n              if (a.done) return {\n                done: true\n              };\n              innerIt = iterableToIterator(a.value);\n            }\n\n            b = innerIt.next();\n\n            if (b.done) {\n              innerDone = true;\n              continue;\n            }\n\n            innerDone = false;\n            return {\n              done: false,\n              value: b.value\n            };\n          }\n        },\n        return: v => {\n          if (allDone) return {\n            done: true,\n            value: v\n          };\n          allDone = true;\n\n          if (!innerDone && typeof innerIt.return === \"function\") {\n            // FIXME: how to express optional iterator properties in flowtype?\n            innerIt.return(v); // close the currently open inner iterator\n          }\n\n          return {\n            done: true,\n            value: v\n          };\n        },\n        throw: e => {\n          if (allDone) throw e; // FIXME: think how to deal with throw\n        }\n      };\n    }\n  };\n}\n\nfunction zipWith(fn, it1, it2) {\n  let done = false;\n  return {\n    [Symbol.iterator]: () => {\n      const i1 = it1[Symbol.iterator](),\n            i2 = it2[Symbol.iterator]();\n      return {\n        next: () => {\n          if (done) return {\n            done: true\n          };\n          const a = i1.next(),\n                b = i2.next();\n          done = a.done || b.done;\n          if (!a.done && typeof i1.return === \"function\") i1.return();\n          if (!b.done && typeof i2.return === \"function\") i2.return();\n          if (done) return {\n            done: true\n          };else {\n            return {\n              done: false,\n              value: fn(a.value, b.value)\n            };\n          }\n        },\n        return: v => {\n          if (typeof i1.return === \"function\") i1.return();\n          if (typeof i2.return === \"function\") i2.return();\n          done = true;\n          return {\n            done: true,\n            value: v\n          };\n        }\n      };\n    }\n  };\n}\n\nfunction zip(it1, it2) {\n  return zipWith((a, b) => [a, b], it1, it2);\n}\n\nfunction bisimilar(it1, it2) {\n  return every2((a, b) => equals(a, b), it1, it2);\n}\n\nfunction bisame(it1, it2) {\n  return every2((a, b) => a === b, it1, it2);\n}\n\nfunction every2(fn, it1, it2) {\n  const i1 = it1[Symbol.iterator](),\n        i2 = it2[Symbol.iterator]();\n\n  while (true) {\n    const a = i1.next(),\n          b = i2.next();\n\n    if (!a.done && !b.done) {\n      if (!fn(a.value, b.value)) return false;else continue;\n    }\n\n    if (a.done && b.done) return true; // in this case i1 and i2 should have released resources\n\n    if (!a.done) {\n      if (typeof i1.return === \"function\") i1.return();\n      return false;\n    }\n\n    if (!b.done) {\n      if (typeof i2.return === \"function\") i2.return();\n      return false;\n    }\n  }\n\n  return true; // dead code; added to appease flowtype\n}\n\nfunction sameElements(a, b) {\n  let m = new Map();\n\n  for (let k of a) modifyMapValue(m, k, c => c == null ? 1 : c + 1);\n\n  for (let k of b) {\n    let c = m.get(k);\n    if (c === 1) m.delete(k);else if (c === undefined) return false; // this closes b\n    else m.set(k, c - 1);\n  }\n\n  return m.size === 0;\n}\n\nclass OneToManyMap {\n  constructor() {\n    this._m = new Map();\n  }\n\n  hasKey(k) {\n    return this._m.has(k);\n  }\n\n  keys() {\n    return this._m.keys();\n  }\n\n  values(k) {\n    let s = this._m.get(k);\n\n    if (s !== undefined) return s.values();else return mkEmptyIterable();\n  }\n\n  countKeys() {\n    return this._m.size;\n  }\n\n  count(k) {\n    let s = this._m.get(k);\n\n    return s === undefined ? 0 : s.size;\n  }\n\n  addKey(k) {\n    if (this._m.get(k) === undefined) this._m.set(k, new Set());\n    return this;\n  }\n\n  add(k, v) {\n    let s = this._m.get(k);\n\n    if (s === undefined) {\n      s = new Set();\n\n      this._m.set(k, s);\n    }\n\n    s.add(v);\n    return this;\n  }\n\n  addMany(k, ite) {\n    let s = this._m.get(k);\n\n    if (s === undefined) {\n      s = new Set();\n\n      this._m.set(k, s);\n    } // even with empty iterator, key is always added\n\n\n    for (let v of ite) s.add(v);\n  }\n\n  remove(k, v) {\n    let s = this._m.get(k);\n\n    if (s === undefined) return false;else return s.delete(v);\n  }\n\n  removeKey(k) {\n    this._m.delete(k);\n  }\n\n  clear() {\n    this._m.clear();\n  }\n\n}\n\nexports.OneToManyMap = OneToManyMap;\nlet refCountMap = new WeakMap();\nlet disposerMap = new WeakMap();\nlet uniqueHandlerMap = new WeakMap(); // shall only be called after initRefCounting called\n\nfunction mkRefCounted(o, disposer, uniqueHandler) {\n  _hdconsole.hdconsole.assert(refCount(o) === 0, \"trying to make an object reference counted twice\");\n\n  disposerMap.set(o, disposer);\n  if (uniqueHandler != null) uniqueHandlerMap.set(o, uniqueHandler);\n  refCountMap.set(o, 1);\n  return o;\n}\n\nfunction setUniqueHandler(o, uniqueHandler) {\n  uniqueHandlerMap.set(o, uniqueHandler);\n}\n\nfunction retain(o) {\n  let cnt = refCountMap.get(o);\n\n  if (cnt == null) {\n    _hdconsole.hdconsole.assert(cnt != null, \"trying to retain a non-refcounted object\"); //retain old behaviour (undefined + 1 === NaN)\n\n\n    refCountMap.set(o, NaN); //TODO Should this be set to NaN? removing line seems better.\n  } else {\n    refCountMap.set(o, cnt + 1);\n  }\n\n  return o;\n}\n\nfunction release(o) {\n  let cnt = refCountMap.get(o);\n\n  _hdconsole.hdconsole.assert(cnt != null && cnt > 0, \"trying to release an already released object\");\n\n  --cnt;\n  refCountMap.set(o, cnt);\n  if (cnt > 1) return cnt;\n\n  if (cnt === 1) {\n    let uniqueHandler = uniqueHandlerMap.get(o);\n    if (uniqueHandler != null) uniqueHandler(o);\n  } else {\n    // cnt === 0\n    let disposer = disposerMap.get(o);\n    if (disposer != null) disposer(o);\n  }\n\n  return cnt;\n}\n\nfunction refCount(o) {\n  let cnt = refCountMap.get(o);\n  return cnt === undefined ? 0 : cnt;\n}\n\nfunction isUnique(o) {\n  return refCount(o) === 1;\n}\n\nclass RefList {\n  constructor() {\n    this._head = null;\n  }\n\n  front() {\n    if (this._head != null) return this._head.data;\n  }\n\n  pushFront(t) {\n    this._head = new RefListNode(this._head, t);\n    return this._head;\n  }\n\n}\n\nexports.RefList = RefList;\n\nclass RefListNode {\n  constructor(n, d) {\n    console.assert(refCount(d) > 0);\n    this.next = n;\n    this.data = d;\n  }\n\n  releaseTail() {\n    let n = this.next;\n\n    while (n != null) {\n      release(n.data);\n      n = n.next;\n    }\n\n    this.next = null;\n  }\n\n}\n\nexports.RefListNode = RefListNode;\n\nclass ListNode {\n  constructor(p, n, d) {\n    this.prev = p;\n    this.next = n;\n    this.data = d;\n  }\n\n}\n\nexports.ListNode = ListNode;\n\nclass LinkedList {\n  constructor() {\n    this._head = null;\n    this._tail = null;\n    this._size = 0;\n  }\n\n  insertNode(pos, n) {\n    if (pos == null) {\n      n.prev = this._tail;\n      n.next = null;\n      this._tail = n;\n    } else {\n      n.prev = pos.prev;\n      n.next = pos;\n      pos.prev = n;\n    }\n\n    if (n.prev == null) this._head = n;else n.prev.next = n;\n    this._size++;\n    return n;\n  }\n\n  insert(pos, v) {\n    return this.insertNode(pos, new ListNode(null, null, v));\n  }\n\n  pushFront(v) {\n    return this.insert(this._head, v);\n  }\n\n  pushNodeFront(n) {\n    return this.insertNode(this._head, n);\n  }\n\n  pushBack(v) {\n    return this.insert(null, v);\n  }\n\n  pushNodeBack(n) {\n    return this.insertNode(null, n);\n  }\n\n  removeNode(pos) {\n    if (pos.next == null) this._tail = pos.prev;else pos.next.prev = pos.prev;\n    if (pos.prev == null) this._head = pos.next;else pos.prev.next = pos.next;\n    this._size--;\n    return pos;\n  }\n\n  remove(pos) {\n    return this.removeNode(pos).data;\n  }\n\n  popFront() {\n    return this._head == null ? null : this.remove(this._head);\n  }\n\n  popBack() {\n    return this._tail == null ? null : this.remove(this._tail);\n  }\n  /*:: @@iterator(): Iterator<T> { return ({}: any); } */\n  // $FlowFixMe: computed property\n\n\n  [Symbol.iterator]() {\n    let curr = this._head;\n    return {\n      next: () => {\n        if (curr == null) return {\n          done: true\n        };else {\n          let r = {\n            value: curr.data,\n            done: false\n          };\n          curr = curr.next;\n          return r;\n        }\n      }\n    };\n  }\n\n  reverseIterator() {\n    let curr = this._tail;\n    return {\n      next: () => {\n        if (curr == null) return {\n          done: true\n        };else {\n          let r = {\n            value: curr.data,\n            done: false\n          };\n          curr = curr.prev;\n          return r;\n        }\n      }\n    };\n  }\n\n}\n\nexports.LinkedList = LinkedList;\n\nclass PriorityList {\n  size() {\n    return this._list._size;\n  }\n\n  constructor() {\n    this._nodeMap = new Map();\n    this._list = new LinkedList();\n    this._highestPriority = -1;\n    this._lowestPriority = 0;\n  } // FIXME: if insert in the middle, may have to assign priorities down (or up) to list\n  // For now this is not implemented, as it is unsure whether it will be needed or not\n  // insertBefore(t: ?T, u: T) {\n  //  let n = t != null ? this._nodeMap.get(t) : null;\n  //  this._list.insert(n, u); // inserts as last if t null or not found\n  // }\n  // Precondition: t is in the priority list\n\n\n  _access(t) {\n    let n = this._nodeMap.get(t);\n\n    if (n == null) console.log(t.name);\n    if (n == null) console.log(this.size());\n\n    _hdconsole.hdconsole.assert(n != null, \"element not found in priority list\");\n\n    if (n == null) throw \"Should not happen, element not found in priority list\"; // this is to appease flow\n\n    return n;\n  }\n\n  remove(t) {\n    let n = this._nodeMap.get(t);\n\n    if (n != null) {\n      // only remove if not already removed\n      this._nodeMap.delete(t);\n\n      this._list.remove(n);\n    }\n  }\n\n  promote(t) {\n    let node = this._access(t);\n\n    node.data.priority = ++this._highestPriority;\n\n    this._list.pushNodeFront(this._list.removeNode(node));\n  }\n\n  demote(t) {\n    let node = this._access(t);\n\n    node.data.priority = --this._lowestPriority;\n\n    this._list.pushNodeBack(this._list.removeNode(node));\n  }\n\n  get highestPriority() {\n    return this._highestPriority;\n  }\n\n  get lowestPriority() {\n    return this._lowestPriority;\n  }\n\n  priority(t) {\n    return this._access(t).data.priority;\n  }\n\n  pushBack(t) {\n    this._nodeMap.set(t, this._list.pushBack({\n      data: t,\n      priority: --this._lowestPriority\n    }));\n  }\n\n  pushFront(t) {\n    this._nodeMap.set(t, this._list.pushFront({\n      data: t,\n      priority: ++this._highestPriority\n    }));\n  } // an iterable that iterates over just the T values, ignores priority value\n\n\n  entries() {\n    return map(pd => pd.data, this);\n  }\n  /*:: @@iterator(): Iterator<PriData<T>> { return ({}: any); } */\n  // $FlowFixMe: computed property\n\n\n  [Symbol.iterator]() {\n    return this._list[Symbol.iterator]();\n  }\n\n  hasHigherPriority(a, b) {\n    return this._access(a).data.priority > this._access(b).data.priority;\n  }\n\n}\n\nexports.PriorityList = PriorityList;\n\nclass ObservableReference {\n  // holds observers\n  // link to another reference\n  constructor(value = null) {\n    this._value = value;\n    this._subject = new Obs.Subject(o => {\n      o.next(this._value);\n    });\n    this._subscription = null;\n  }\n\n  subscribe(s) {\n    return this._subject.subscribe(s);\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(v) {\n    if (this._subscription != null) {\n      this._subscription.unsubscribe();\n\n      this._subscription = null;\n    }\n\n    this._setValue(v);\n  }\n\n  _setValue(v) {\n    if (this._value !== null) this._subject.sendNext(null);\n    this._value = v;\n    if (v !== null) this._subject.sendNext(v);\n  }\n\n  link(target) {\n    this.value = null; // unsubscribes, if already linked\n\n    this._subscription = target.subscribe(v => {\n      this._setValue(v);\n    });\n  }\n\n}\n\nexports.ObservableReference = ObservableReference;\n\nfunction throw_on_null(t) {\n  if (t == null) throw \"Expected non-null\";\n  return t;\n}\n\nfunction nonnull_cast(t) {\n  return t;\n}\n\nclass BinaryHeap {\n  constructor(cmp) {\n    this._cmp = cmp;\n    this._data = [null]; // empty unused element at 0 allows simpler index math\n  }\n\n  size() {\n    return this._data.length - 1;\n  }\n\n  empty() {\n    return this.size() === 0;\n  }\n\n  _swap(i, j) {\n    let tmp = this._data[i];\n    this._data[i] = this._data[j];\n    this._data[j] = tmp;\n  }\n\n  _percolateUp(i) {\n    while (i >= 2) {\n      let parent = Math.floor(i / 2);\n\n      if (this._cmp(this._data[i], this._data[parent])) {\n        this._swap(i, parent);\n\n        i = parent;\n      } else break;\n    }\n  }\n\n  push(t) {\n    this._data.push(t);\n\n    this._percolateUp(this.size());\n  }\n\n  _percolateDown(i) {\n    while (2 * i <= this.size()) {\n      let smallerChild = this._minOfSiblings(2 * i);\n\n      if (!this._cmp(this._data[i], this._data[smallerChild])) {\n        this._swap(i, smallerChild);\n\n        i = smallerChild;\n      } else break;\n    }\n  }\n\n  _minOfSiblings(i) {\n    if (i >= this.size() || this._cmp(this._data[i], this._data[i + 1])) return i;else return i + 1;\n  }\n\n  pop() {\n    let ret = this._data[1];\n\n    let last = this._data.pop();\n\n    if (this.size() > 0) {\n      this._data[1] = last;\n\n      this._percolateDown(1);\n    }\n\n    return ret;\n  }\n\n}\n\nexports.BinaryHeap = BinaryHeap;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./lib/hotdrink.js\");\n",""],"names":["Object","defineProperty","exports","value","VariableActivation","TrackingPromise","MethodActivation","EvaluationGraph","Deferred","_variable","_interopRequireDefault","require","_constraintSystemUtil","_utilities","obj","__esModule","default","constructor","_promise","Promise","r","j","resolve","v","reject","e","promise","p","tracker","_fulfillTracker","then","onFulfilled","onRejected","catch","finally","onFinally","abandoned","_pending","_deferred","_outMethods","Set","_inMethod","mkRefCounted","t","name","inMethod","outMethods","outMethodsSize","size","addOutMethod","m","add","setInMethod","f","promiseMask","_f","_mask","ins","_ins","outs","_outs","insSize","length","outsSize","execute","forEach","o","i","retain","oproms","map","all","release","nonpromiseIns","filter","maskPromise","modifiedIns","maskUpdate","mCount","def","arr","push","setUniqueHandler","inValues","inArgs","vind","console","assert","Array","isArray","adjacentOutVertices","outDegree","adjacentInVertices","inDegree","LEFT","ComponentScope","enumerable","get","_parsing","ParseState","TypeError","SetScope","RIGHT","asLeft","asRight","block","buildComponent","checkComponent","checkConstraint","checkFirstMethod","checkOtherMethod","checkParameterList","checkQualifiers","component","functionBody","hdl","isLeft","isRight","jsCode","left","mkParseState","pComponent","pConstraint","pMethod","pVariables","qualifiedParameterList","qualifierList","right","stringLiteral","templateLiteral","topComponent","withPos","_constraint","_lexingTools","_component","_constraintSpec","_method","_variableReference","tag","lift2","cp","pos","currentPos","cmp","key","variableDeclarations","undefined","parent","has","s","_set","k","Error","_msg","_pos","message","toString","qs","seen","q","pars","scope","seenName","par","qualifiers","pn","parameterName","setUnion","expectedVariableNames","foundNames","setEquals","missingVariables","from","setDifference","join","c","methods","variableNames","vs","constraints","components","endMarkers","includeMarker","ps","nc","peek","includes","ok","failF","concat","item","fail","oneOf","pBind","sat","isOpenBrace","b","closingBraceOf","ret","success","pChar","quote","equote","str","lift","many","exactString","consumed","must","context","token","open","code_and_close","body","_met","foldl","q1","q2","orMasks","qualifier2mask","maskNone","inparNames","code","Function","bodyParser","_","pSplice","word","pBind_","opt","identifier","ignore","m1","m2","pChars","sepList","pname","inBetween","identifierWithOptionalInitializer","isReference","initializer","initializerExpression","mkComponentAST","declarations","Map","node","decl","vdecl","set","componentBody","strs","splices","manyws","freshComponentName","eof","buildMethod","mnode","vmap","_mnode$name","buildAndAddConstraint","owner","cnode","name2index","index","ms","vrefs","keys","getVariableReference","cspec","emplaceConstraint","compNode","comp","addComponent","values","emplaceVariableReference","init","emplaceVariable","_hdconsole","_constraintSystem","Component","_owner","_system","_name","_vars","_varRefs","_varRefNames","_constraints","_constraintNames","_nextFreshCIndex","_components","clone","that","o2n","n","isOwningReference","nrefs","vr","isStay","_cspec","_optional","system","connectSystem","hdconsole","error","warn","_connectSystem","_danglingCount","addConstraint","disconnectSystem","_disconnectSystem","removeConstraint","mkVariable","stayConstraintSpec","optional","_nextFreshConstraintName","variableReferenceName","constraintName","varRef","property","Proxy","ref","link","cs","ConstraintSpec","_methods","firstMethod","first","nvars","_nvars","_v2ins","vIndex","hasMethod","prettyPrint","prefix","enforceStayMethod","freshNameGenerator","isConstraint","isMethod","isOwnerOf","isVariable","maskPromiseUpdate","c1","c2","hasOwnProperty","method","stay","selectedMethod","a","_graphAlgorithms","_computationGraph","_solutionGraph","_simplePlanner","ConstraintSystem","allConstraints","_musts","_optionals","entries","removeComponent","PriorityList","_dirty","_v2cs","OneToManyMap","_usg","UpstreamSolutionGraph","_dsg","DownstreamSolutionGraph","update","plan","solveFromConstraints","variables","isMust","isOptional","pushBack","remove","count","removeKey","delete","setDirty","gatherUpstreamConstraints","reverseTopoSortFrom","gatherDownstreamConstraints","gatherDownstreamVariables","promoteVariable","promoteConstraint","getStay","promote","demoteConstraint","demote","strength","highestPriority","priority","planDirty","updateDirty","executeDirty","clear","toEnforce","constraintsThatNeedNewPlan","enforceable","forcedSet","opts","BinaryHeap","sp","clearSelectedMethod","_initPruningData","empty","pop","extendPlanIfPossible","_prune","undoChangesAfterFailedPlan","constraintsOfInterest","inspected","worklist","_forcedVariables","i2v","cn","isEnforced","vv","_makeMethodsNonviableByVariable","solve","downstreamVariables","getSourceConstraint","dsc","reverse","scheduleConstraint","isOutputVariable","inDeferreds","_activation","prevActs","pushNewActivation","outDeferreds","_promiseMask","scheduleCommand","outArray","fill","Constraint","substitute","vrs","_used","_indices","subscribe","log","equals","v2i","vOuts","vIns","nonOuts","vNonOuts","viableMethods","_viableMethods","_selectedMethod","isOut","isInputVariable","isIn","isNonOutputVariable","isNonOut","mkEmptyIterable","downstreamAndUndetermined","upstreamVariables","upstreamAndUndetermined","_outCounts","vmcount","_makeMethodViable","vmcountOld","newlyUnforced","_makeMethodNonviable","newlyForced","vi","Method","indices","_nonOuts","validIndex","nIns","nOuts","nNonOuts","SimplePlanner","_freeVars","_forcedByPlan","_changeList","foundFree","freeMethods","oldm","countKeys","every","some","firstFreeMethod","VariableReference","ObservableReference","_index","Obs","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","prototype","call","desc","freshIndex","ind","Variable","_inError","_value","_error","stale","pending","_subject","Subject","evt","inError","next","subscribeValue","subscribePending","subscribeError","sendNext","val","currentPromise","assign","_assign","prevActivation","sc","touch","_touchPlanSolve","pushedActivation","dfsVisit","reverseTopoSort","g","visitor","visited","stack","it","iterableToIterator","done","finishVertex","discoverVertex","vertices","TopoVisitor","result","vis","HdError","HdConsole","_defineProperty","configurable","writable","on","off","args","errorsOnly","_default","msg","params","captureStackTrace","_exportNames","defaultConstraintSystem","constraintSystemInVisNodesAndEdges","constraintSystemInVisAllNodesAndEdges","MaskType","_constraintBuilder","objectId","counter","wm","id","curr","nodes","edges","label","shape","mcounter","color","cid","to","arrows","dashes","Position","isAlpha","isAlphaNum","isAlphaPlus","isDigit","isWhitespace","row","col","source","_row","_col","_source","advance","SubscriptionObserver","ReplaySubject","Observable","HdSubscription","BehaviorSubject","mkObserver","obs","err","complete","observer","subscriber","_subscriber","subscription","start","closed","subscriptionObserver","cleanup","unsubscribe","_cleanup","of","items","_observer","cUp","_subscription","errorValue","state","observers","_subjectState","sendError","sendComplete","nObservers","limit","past","pastLimit","isCompleted","isError","_replaySubjectState","shift","blockComment","alphaPlus","alphaNum","ParseError","digit","failure","go","keyword","lift3","lift4","lift5","lineComment","many1","named","nat","notFollowedBy","onews","pNot","pTry","parens","peekItem","until","lex","_peekIterator","input","_input","_context","_splices","pushContext","popContext","checkpoint","forgetCheckpoint","resetCheckpoint","reset","getSplice","parseErrorF","expF","ctxName","ctxPos","spc","nonspc","unexpected","parseError","exp","Symbol","iterator","es","ef","expecting","unexp","_expecting","_unexpected","_ctxName","_ctxPos","_formatExpecting","u","predicate","parserName","x","unshift","pre","rest","nl","post","r1","r2","_ignoreTag","parsers","rs","p1","p2","p3","p4","p5","pg","pr","close","ls","h","ds","Number","element","sep","pstr","PeekIterator","iter","_iter","_currentIndex","_firstIndex","_buffer","_checkpoints","_fetch","_at","_collect","_ind2buf","currentlyRead","toRead","toRemove","splice","d","peekMany","slice","RefListNode","RefList","ListNode","LinkedList","adjacentFind","bisame","bisimilar","copy","every2","firstKeepOpen","isSortedBy","isUnique","iteratorToIterable","mapEquals","mkEmptyIterator","mkSingletonIterable","modifyMapValue","nonnull_cast","orderedMapEquals","orderedSetEquals","refCount","sameElements","setDifferenceTo","setUnionTo","setUnionToWithDiff","subsetOf","throw_on_null","zip","zipWith","ak","bk","s1","s2","key1","value1","key2","value2","_copy","create","getPrototypeOf","sub","sup","fn","newv","diff","iterable","mapIterator","return","throw","filterIterator","untilIterator","step","prevVal","acc","it1","outerIt","innerIt","innerDone","allDone","it2","i1","i2","_m","hasKey","addKey","addMany","ite","refCountMap","disposerMap","uniqueHandlerMap","disposer","uniqueHandler","cnt","NaN","_head","front","data","pushFront","releaseTail","prev","_tail","_size","insertNode","insert","pushNodeFront","pushNodeBack","removeNode","popFront","popBack","reverseIterator","_list","_nodeMap","_highestPriority","_lowestPriority","_access","lowestPriority","pd","hasHigherPriority","_setValue","target","_cmp","_data","_swap","tmp","_percolateUp","Math","floor","_percolateDown","smallerChild","_minOfSiblings","last"],"sourceRoot":""}